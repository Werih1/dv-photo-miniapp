<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>DV-Lottery Photo Check</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #333;
            overflow: hidden;
        }

        /* ===== SPLASH SCREEN ===== */
        .splash {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(25, 78, 132, 0.7), rgba(25, 78, 132, 0.7)), url('images/dv-lottery-logo.jpg') center/cover no-repeat;
            padding: 40px 20px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .splash.hidden {
            display: none;
        }

        .splash-top {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .splash-subtitle {
            font-size: 18px;
            color: rgba(255,255,255,0.95);
            height: 24px;
            min-height: 24px;
            font-weight: 500;
            text-align: center;
            margin-bottom: 20px;
        }

        .splash-bottom {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .language-selector-splash {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .lang-btn-splash {
            width: 70px;
            height: 70px;
            border: 3px solid white;
            border-radius: 14px;
            background: rgba(255,255,255,0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .lang-btn-splash img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 11px;
        }

        .lang-btn-splash:active {
            transform: scale(1.08);
            border-color: rgba(255,255,255,0.8);
            box-shadow: 0 6px 20px rgba(255,255,255,0.3);
        }

        /* ===== MAIN APP ===== */
        .app {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            overflow: hidden;
            background: #f8f9fa;
        }

        .app.active {
            display: flex;
        }

        /* ===== APP HEADER ===== */
        .app-header {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .app-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .attempts-badge {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(255,255,255,0.25);
            color: white;
            border-radius: 20px;
            font-weight: 600;
            font-size: 13px;
            backdrop-filter: blur(10px);
        }

        /* ===== MAIN CONTENT ===== */
        .app-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .upload-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            appearance: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(25, 78, 132, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        /* ===== MENU SECTIONS ===== */
        .menu-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .menu-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-height: 100px;
            justify-content: center;
        }

        .menu-item-icon {
            font-size: 24px;
        }

        .menu-item-text {
            font-size: 12px;
            font-weight: 600;
            color: #194E84;
            line-height: 1.3;
        }

        .menu-item:active {
            border-color: #194E84;
            background: rgba(25, 78, 132, 0.05);
            transform: scale(0.98);
        }

        /* ===== TABS (HIDDEN BY DEFAULT) ===== */
        .tabs {
            display: none;
            gap: 0;
            width: 100%;
            border-bottom: 2px solid #e0e0e0;
            background: white;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
            overflow-x: auto;
            overflow-y: hidden;
        }

        .tabs.active {
            display: flex;
        }

        .tab {
            flex: 1;
            min-width: 80px;
            padding: 14px 12px;
            border: none;
            background: white;
            color: #999;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            white-space: nowrap;
        }

        .tab.active {
            color: #194E84;
            background: rgba(25, 78, 132, 0.05);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #194E84 0%, #1a5a99 100%);
        }

        /* ===== TAB CONTENT ===== */
        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            -webkit-overflow-scrolling: touch;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        /* ===== BACK BUTTON ===== */
        .back-btn {
            background: white;
            border: 2px solid #194E84;
            color: #194E84;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 16px;
            width: fit-content;
        }

        .back-btn:active {
            background: rgba(25, 78, 132, 0.1);
        }

        /* ===== NEWS CARDS ===== */
        .news-full-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .news-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #194E84;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .news-card-date {
            font-size: 12px;
            color: #194E84;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .news-card-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .news-card-text {
            font-size: 13px;
            line-height: 1.6;
            color: #555;
        }

        /* ===== PRICING ===== */
        .promo-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            background: white;
            padding: 12px;
            border-radius: 12px;
        }

        .promo-input-group input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            color: #333;
        }

        .promo-input-group button {
            padding: 10px 16px;
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .pricing-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .pricing-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .pricing-card:active {
            border-color: #194E84;
            box-shadow: 0 4px 12px rgba(25, 78, 132, 0.2);
        }

        .pricing-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .pricing-attempts {
            font-size: 13px;
            color: #194E84;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .pricing-price {
            font-size: 20px;
            font-weight: 700;
            color: #194E84;
            margin-bottom: 12px;
        }

        .btn-buy {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
        }

        .btn-buy:active {
            transform: scale(0.98);
        }

        /* ===== INSTRUCTIONS ===== */
        .instructions {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .instruction-block {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #194E84;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .instruction-block h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #333;
        }

        .instruction-block ol,
        .instruction-block ul {
            margin-left: 16px;
            font-size: 13px;
            line-height: 1.8;
            color: #555;
        }

        .instruction-block li {
            margin-bottom: 6px;
        }

        /* ===== SUPPORT BUTTON ===== */
        .support-button {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 2px solid #194E84;
            margin-top: 16px;
        }

        .support-button a {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-block;
            font-weight: 600;
            transition: all 0.3s;
        }

        .support-button a:active {
            transform: scale(0.98);
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #999;
        }
    </style>
</head>
<body>
    <!-- SPLASH SCREEN -->
    <div class="splash" id="splashScreen">
        <div class="splash-top">
            <div class="splash-subtitle" id="splashSubtitle">–í—ã–±–µ—Ä–µ—Ç–µ —è–∑—ã–∫</div>
        </div>
        
        <div class="splash-bottom">
            <div class="language-selector-splash">
                <button class="lang-btn-splash" data-lang="ru" title="–†—É—Å—Å–∫–∏–π">
                    <img src="images/russia.jpg" alt="–†—É—Å—Å–∫–∏–π">
                </button>
                <button class="lang-btn-splash" data-lang="en" title="English">
                    <img src="images/united.jpg" alt="English">
                </button>
                <button class="lang-btn-splash" data-lang="fr" title="Fran√ßais">
                    <img src="images/france.jpg" alt="Fran√ßais">
                </button>
                <button class="lang-btn-splash" data-lang="ar" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
                    <img src="images/emirates.jpg" alt="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div class="app" id="mainApp">
        <!-- APP HEADER -->
        <div class="app-header">
            <div class="app-title">DV-Lottery Photo Check</div>
            <div class="attempts-badge"><span id="attemptsLabel">–û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–æ–∫:</span> <span id="attemptsCount">3</span></div>
        </div>

        <!-- MAIN MENU VIEW -->
        <div id="menuView" class="app-content">
            <div class="upload-section">
                <button class="button btn-primary" id="uploadBtn">üì∏ –ó–ê–ì–†–£–ó–ò–¢–¨ –§–û–¢–û</button>
            </div>

            <div class="menu-sections">
                <div class="menu-item" id="menuHowItWorks">
                    <div class="menu-item-icon">‚ùì</div>
                    <div class="menu-item-text" id="textHowWorks">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                </div>

                <div class="menu-item" id="menuNews">
                    <div class="menu-item-icon">üì∞</div>
                    <div class="menu-item-text" id="textNews">–ù–æ–≤–æ—Å—Ç–∏</div>
                </div>

                <div class="menu-item" id="menuPricing">
                    <div class="menu-item-icon">üí≥</div>
                    <div class="menu-item-text" id="textPricing">–¢–∞—Ä–∏—Ñ—ã</div>
                </div>

                <div class="menu-item" id="menuDVForm">
                    <div class="menu-item-icon">üìù</div>
                    <div class="menu-item-text" id="textDVForm">–ö–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å DV 2027</div>
                </div>

                <div class="menu-item" id="menuSupport" style="grid-column: 1 / -1;">
                    <div class="menu-item-icon">üí¨</div>
                    <div class="menu-item-text" id="textSupport">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
                </div>
            </div>
        </div>

        <!-- TABS (shown when in sub-sections) -->
        <div class="tabs" id="appTabs">
            <button class="tab active" data-tab="home">–ì–õ–ê–í–ù–ê–Ø</button>
            <button class="tab" data-tab="news">–ù–û–í–û–°–¢–ò</button>
            <button class="tab" data-tab="pricing">–¢–ê–†–ò–§–´</button>
            <button class="tab" data-tab="instructions">–¢–†–ï–ë–û–í–ê–ù–ò–Ø</button>
        </div>

        <!-- HOW IT WORKS -->
        <div class="tab-content" id="howWorksTab">
            <button class="back-btn" id="backBtn1">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="instructions" id="howWorksList"></div>
        </div>

        <!-- NEWS TAB -->
        <div class="tab-content" id="newsTab">
            <button class="back-btn" id="backBtn2">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="news-full-container" id="newsFullList"></div>
        </div>

        <!-- PRICING TAB -->
        <div class="tab-content" id="pricingTab">
            <button class="back-btn" id="backBtn3">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="promo-input-group">
                <input type="text" id="promoCode" placeholder="GIFT2026" autocomplete="off">
                <button id="applyPromoBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
            <div class="pricing-section" id="pricingList"></div>
        </div>

        <!-- DV FORM TAB -->
        <div class="tab-content" id="dvFormTab">
            <button class="back-btn" id="backBtn4">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="instructions" id="dvFormList"></div>
        </div>
    </div>

    <input type="file" id="photoInput" accept="image/*" style="display: none;">

    <script>
        // ===== MULTILINGUAL CONTENT =====
        const CONTENT = {
            ru: {
                selectLanguage: '–í—ã–±–µ—Ä–µ—Ç–µ —è–∑—ã–∫',
                title: 'DV-Lottery Photo Check',
                attempts_label: '–û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–æ–∫:',
                btn_upload: 'üì∏ –ó–ê–ì–†–£–ó–ò–¢–¨ –§–û–¢–û',
                btn_how_works: '–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç',
                btn_news: '–ù–æ–≤–æ—Å—Ç–∏',
                btn_pricing: '–¢–∞—Ä–∏—Ñ—ã',
                btn_dv_form: '–ö–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å DV 2027',
                btn_support: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞',
                btn_apply: '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',
                btn_back: '‚Üê –ù–∞–∑–∞–¥',
                btn_buy: '–ö—É–ø–∏—Ç—å',
                promo_placeholder: 'GIFT2026',
                promo_success: '‚úì –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! +5 –ø–æ–ø—ã—Ç–æ–∫',
                promo_invalid: '‚úó –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥',
                upload_success: '‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!',
                support_link: 'https://t.me/Stars4tonBot',
                news: [
                    { date: '27.11.2025', title: '–ù–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ', text: '–£–ª—É—á—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —è–∑—ã–∫–æ–≤' },
                    { date: '26.11.2025', title: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤', text: '–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –†—É—Å—Å–∫–æ–º, –ê–Ω–≥–ª–∏–π—Å–∫–æ–º, –§—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–º –∏ –ê—Ä–∞–±—Å–∫–æ–º —è–∑—ã–∫–∞—Ö' },
                    { date: '25.11.2025', title: '–ü—Ä–æ–º–æ–∫–æ–¥ GIFT2026', text: '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ GIFT2026 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è +5 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫' }
                ],
                pricing: [
                    { name: '–°–æ–ª–æ Plan', attempts: '10 –ø–æ–ø—ã—Ç–æ–∫', price: '99 ‚≠ê' },
                    { name: '–°–µ–º–µ–π–Ω—ã–π DV', attempts: '30 –ø–æ–ø—ã—Ç–æ–∫', price: '249 ‚≠ê' },
                    { name: 'Agency PRO', attempts: '–ë–µ–∑–ª–∏–º–∏—Ç', price: '2499 ‚≠ê' }
                ],
                how_works: [
                    { title: '–®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ', text: '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ –≤–∞—à–µ–≥–æ –ª–∏—Ü–∞' },
                    { title: '–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π', text: '–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ç–æ –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º DV –ª–æ—Ç–µ—Ä–µ–∏' },
                    { title: '–®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç', text: '–ó–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –≤—ã —É–∑–Ω–∞–µ—Ç–µ, –ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –≤–∞—à–µ —Ñ–æ—Ç–æ' }
                ],
                dv_form: [
                    { title: '–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è', text: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã DV –ª–æ—Ç–µ—Ä–µ–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –±–µ–∑ –æ—à–∏–±–æ–∫' },
                    { title: '–§–æ—Ç–æ', text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –Ω–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–æ–º' },
                    { title: '–û—Ç–ø—Ä–∞–≤–∫–∞', text: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ' }
                ]
            },
            en: {
                selectLanguage: 'Select language',
                title: 'DV-Lottery Photo Check',
                attempts_label: 'Attempts left:',
                btn_upload: 'üì∏ UPLOAD PHOTO',
                btn_how_works: 'How it works',
                btn_news: 'News',
                btn_pricing: 'Pricing',
                btn_dv_form: 'How to fill DV 2027',
                btn_support: 'Support',
                btn_apply: 'Apply',
                btn_back: '‚Üê Back',
                btn_buy: 'Buy',
                promo_placeholder: 'GIFT2026',
                promo_success: '‚úì Promo code accepted! +5 attempts',
                promo_invalid: '‚úó Invalid promo code',
                upload_success: '‚úÖ Photo uploaded!',
                support_link: 'https://t.me/Stars4tonBot',
                news: [
                    { date: '27.11.2025', title: 'New Update', text: 'Improved face detection accuracy and added support for 4 languages' },
                    { date: '26.11.2025', title: 'Language Support', text: 'Now available in Russian, English, French, and Arabic' },
                    { date: '25.11.2025', title: 'Promo Code GIFT2026', text: 'Use promo code GIFT2026 to get +5 additional attempts' }
                ],
                pricing: [
                    { name: 'Solo Plan', attempts: '10 attempts', price: '99 ‚≠ê' },
                    { name: 'Family DV', attempts: '30 attempts', price: '249 ‚≠ê' },
                    { name: 'Agency PRO', attempts: 'Unlimited', price: '2499 ‚≠ê' }
                ],
                how_works: [
                    { title: 'Step 1: Upload photo', text: 'Click "Upload photo" and select a quality photo of your face' },
                    { title: 'Step 2: Check requirements', text: 'The system will verify that your photo meets all DV lottery requirements' },
                    { title: 'Step 3: Get result', text: 'Within seconds, you will know if your photo is suitable' }
                ],
                dv_form: [
                    { title: 'Basic Information', text: 'Fill all DV lottery form fields completely and without errors' },
                    { title: 'Photo', text: 'Upload a photo verified by our service' },
                    { title: 'Submission', text: 'Check all data and submit the application on the official website' }
                ]
            },
            fr: {
                selectLanguage: 'Choisir la langue',
                title: 'V√©rification Photo DV-Lottery',
                attempts_label: 'Tentatives restantes:',
                btn_upload: 'üì∏ T√âL√âCHARGER',
                btn_how_works: 'Comment √ßa marche',
                btn_news: 'Actualit√©s',
                btn_pricing: 'Tarifs',
                btn_dv_form: 'Comment remplir DV 2027',
                btn_support: 'Support',
                btn_apply: 'Appliquer',
                btn_back: '‚Üê Retour',
                btn_buy: 'Acheter',
                promo_placeholder: 'GIFT2026',
                promo_success: '‚úì Code promo accept√©! +5 tentatives',
                promo_invalid: '‚úó Code promo invalide',
                upload_success: '‚úÖ Photo t√©l√©charg√©e!',
                support_link: 'https://t.me/Stars4tonBot',
                news: [
                    { date: '27.11.2025', title: 'Nouvelle mise √† jour', text: 'Pr√©cision am√©lior√©e de la d√©tection des visages et support de 4 langues' },
                    { date: '26.11.2025', title: 'Support multilingue', text: 'Disponible en russe, anglais, fran√ßais et arabe' },
                    { date: '25.11.2025', title: 'Code GIFT2026', text: 'Utilisez GIFT2026 pour +5 tentatives suppl√©mentaires' }
                ],
                pricing: [
                    { name: 'Plan Solo', attempts: '10 tentatives', price: '99 ‚≠ê' },
                    { name: 'Famille DV', attempts: '30 tentatives', price: '249 ‚≠ê' },
                    { name: 'Agence PRO', attempts: 'Illimit√©', price: '2499 ‚≠ê' }
                ],
                how_works: [
                    { title: '√âtape 1: T√©l√©charger photo', text: 'Cliquez sur "T√©l√©charger" et s√©lectionnez une photo de qualit√©' },
                    { title: '√âtape 2: V√©rifier les exigences', text: 'Le syst√®me v√©rifiera que votre photo r√©pond √† tous les crit√®res' },
                    { title: '√âtape 3: Obtenir le r√©sultat', text: 'En quelques secondes, vous saurez si votre photo convient' }
                ],
                dv_form: [
                    { title: 'Informations de base', text: 'Remplissez tous les champs du formulaire DV correctement' },
                    { title: 'Photo', text: 'T√©l√©chargez une photo v√©rifi√©e par notre service' },
                    { title: 'Soumission', text: 'V√©rifiez les donn√©es et soumettez la demande' }
                ]
            },
            ar: {
                selectLanguage: 'ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©',
                title: 'ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸàÿ± ÿßŸÑŸäÿßŸÜÿµŸäÿ®',
                attempts_label: 'ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©:',
                btn_upload: 'üì∏ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ©',
                btn_how_works: 'ŸÉŸäŸÅŸäÿ© ÿßŸÑÿπŸÖŸÑ',
                btn_news: 'ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
                btn_pricing: 'ÿßŸÑÿ£ÿ≥ÿπÿßÿ±',
                btn_dv_form: 'ŸÉŸäŸÅŸäÿ© ŸÖŸÑÿ° DV 2027',
                btn_support: 'ÿßŸÑÿØÿπŸÖ',
                btn_apply: 'ÿ™ÿ∑ÿ®ŸäŸÇ',
                btn_back: '‚Üê ÿ±ÿ¨Ÿàÿπ',
                btn_buy: 'ÿ¥ÿ±ÿßÿ°',
                promo_placeholder: 'GIFT2026',
                promo_success: '‚úì ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ±ŸàŸäÿ¨! +5 ŸÖÿ≠ÿßŸàŸÑÿßÿ™',
                promo_invalid: '‚úó ÿ±ŸÖÿ≤ ÿ™ÿ±ŸàŸäÿ¨ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠',
                upload_success: '‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ©!',
                support_link: 'https://t.me/Stars4tonBot',
                news: [
                    { date: '27.11.2025', title: 'ÿ™ÿ≠ÿØŸäÿ´ ÿ¨ÿØŸäÿØ', text: 'ÿ™ÿ≠ÿ≥ŸäŸÜ ÿØŸÇÿ© ŸÉÿ¥ŸÅ ÿßŸÑŸàÿ¨ŸàŸá Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿØÿπŸÖ 4 ŸÑÿ∫ÿßÿ™' },
                    { date: '26.11.2025', title: 'ÿØÿπŸÖ ŸÖÿ™ÿπÿØÿØ ÿßŸÑŸÑÿ∫ÿßÿ™', text: 'ŸÖÿ™ÿßÿ≠ ÿ®ÿßŸÑŸÑÿ∫ÿßÿ™ ÿßŸÑÿ±Ÿàÿ≥Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ© ŸàÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ© ŸàÿßŸÑÿπÿ±ÿ®Ÿäÿ©' },
                    { date: '25.11.2025', title: 'ÿ±ŸÖÿ≤ GIFT2026', text: 'ÿßÿ≥ÿ™ÿÆÿØŸÖ GIFT2026 ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ +5 ŸÖÿ≠ÿßŸàŸÑÿßÿ™' }
                ],
                pricing: [
                    { name: 'ÿÆÿ∑ÿ© ÿ≥ŸàŸÑŸà', attempts: '10 ŸÖÿ≠ÿßŸàŸÑÿßÿ™', price: '99 ‚≠ê' },
                    { name: 'ÿπÿßÿ¶ŸÑÿ© DV', attempts: '30 ŸÖÿ≠ÿßŸàŸÑÿ©', price: '249 ‚≠ê' },
                    { name: 'ŸàŸÉÿßŸÑÿ© PRO', attempts: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØŸàÿØ', price: '2499 ‚≠ê' }
                ],
                how_works: [
                    { title: 'ÿßŸÑÿÆÿ∑Ÿàÿ© 1: ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ©', text: 'ÿßŸÜŸÇÿ± ÿπŸÑŸâ "ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ©" ŸàÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ© ÿ¨ŸäÿØÿ© ÿßŸÑÿ¨ŸàÿØÿ©' },
                    { title: 'ÿßŸÑÿÆÿ∑Ÿàÿ© 2: ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™', text: 'ÿ≥Ÿäÿ™ÿ≠ŸÇŸÇ ÿßŸÑŸÜÿ∏ÿßŸÖ ŸÖŸÜ ÿ£ŸÜ ÿµŸàÿ±ÿ™ŸÉ ÿ™ŸÅŸä ÿ®ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™' },
                    { title: 'ÿßŸÑÿÆÿ∑Ÿàÿ© 3: ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©', text: 'ŸÅŸä ÿ´ŸàÿßŸÜ ŸÖÿπÿØŸàÿØÿ© ÿ≥ÿ™ÿπÿ±ŸÅ ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿµŸàÿ±ÿ™ŸÉ ŸÖŸÜÿßÿ≥ÿ®ÿ©' }
                ],
                dv_form: [
                    { title: 'ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©', text: 'ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿ≠ŸÇŸàŸÑ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠ ŸàŸÉÿßŸÖŸÑ' },
                    { title: 'ÿßŸÑÿµŸàÿ±ÿ©', text: 'ÿ≠ŸÖŸÑ ÿµŸàÿ±ÿ© ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜŸáÿß ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿÆÿØŸÖÿ™ŸÜÿß' },
                    { title: 'ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ', text: 'ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ Ÿàÿ£ÿ±ÿ≥ŸÑ ÿßŸÑÿ∑ŸÑÿ®' }
                ]
            }
        };

        // ===== APP STATE =====
        let appState = {
            currentLang: null,
            attempts: 3,
            languageSelected: false,
            currentView: 'menu'
        };

        const LANGUAGES = ['ru', 'en', 'fr', 'ar'];
        let currentLangIndex = 0;
        let animationInterval = null;

        // ===== INITIALIZATION =====
        window.addEventListener('load', () => {
            initApp();
        });

        function initApp() {
            if (window.Telegram?.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }

            setupEventListeners();
            startLanguageAnimation();
        }

        function startLanguageAnimation() {
            const subtitleEl = document.getElementById('splashSubtitle');
            
            animationInterval = setInterval(() => {
                currentLangIndex = (currentLangIndex + 1) % LANGUAGES.length;
                const lang = LANGUAGES[currentLangIndex];
                subtitleEl.style.opacity = '0';
                
                setTimeout(() => {
                    subtitleEl.textContent = CONTENT[lang].selectLanguage;
                    subtitleEl.style.opacity = '1';
                }, 300);
            }, 2000);
        }

        function setupEventListeners() {
            // Language selection
            document.querySelectorAll('.lang-btn-splash').forEach(btn => {
                btn.addEventListener('click', () => {
                    selectLanguage(btn.dataset.lang);
                });
            });

            // Menu items
            document.getElementById('menuHowItWorks').addEventListener('click', () => showSection('howWorks'));
            document.getElementById('menuNews').addEventListener('click', () => showSection('news'));
            document.getElementById('menuPricing').addEventListener('click', () => showSection('pricing'));
            document.getElementById('menuDVForm').addEventListener('click', () => showSection('dvForm'));
            document.getElementById('menuSupport').addEventListener('click', () => {
                const link = CONTENT[appState.currentLang].support_link;
                window.open(link, '_blank');
            });

            // Back buttons
            ['backBtn1', 'backBtn2', 'backBtn3', 'backBtn4'].forEach(id => {
                document.getElementById(id).addEventListener('click', () => backToMenu());
            });

            // Upload
            document.getElementById('uploadBtn').addEventListener('click', () => {
                document.getElementById('photoInput').click();
            });

            document.getElementById('photoInput').addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    alert(CONTENT[appState.currentLang].upload_success);
                    appState.attempts--;
                    document.getElementById('attemptsCount').textContent = appState.attempts;
                }
            });

            document.getElementById('applyPromoBtn').addEventListener('click', applyPromoCode);
        }

        function selectLanguage(lang) {
            if (animationInterval) clearInterval(animationInterval);
            
            appState.currentLang = lang;
            appState.languageSelected = true;
            
            setTimeout(() => {
                document.getElementById('splashScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.add('active');
                updateAllContent();
                
                if (appState.currentLang === 'ar') {
                    document.documentElement.setAttribute('dir', 'rtl');
                    document.documentElement.lang = 'ar';
                } else {
                    document.documentElement.removeAttribute('dir');
                    document.documentElement.lang = appState.currentLang;
                }
            }, 300);
        }

        function updateAllContent() {
            const content = CONTENT[appState.currentLang];
            
            document.getElementById('textHowWorks').textContent = content.btn_how_works;
            document.getElementById('textNews').textContent = content.btn_news;
            document.getElementById('textPricing').textContent = content.btn_pricing;
            document.getElementById('textDVForm').textContent = content.btn_dv_form;
            document.getElementById('textSupport').textContent = content.btn_support;
            document.getElementById('uploadBtn').textContent = content.btn_upload;
            document.getElementById('promoCode').placeholder = content.promo_placeholder;
            document.getElementById('applyPromoBtn').textContent = content.btn_apply;
            document.getElementById('attemptsLabel').textContent = content.attempts_label;
            
            populateAllContent();
        }

        function populateAllContent() {
            populateNews();
            populatePricing();
            populateHowWorks();
            populateDVForm();
            updateBackButtons();
        }

        function populateNews() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('newsFullList');
            
            list.innerHTML = content.news.map(n => `
                <div class="news-card">
                    <div class="news-card-date">${n.date}</div>
                    <div class="news-card-title">${n.title}</div>
                    <div class="news-card-text">${n.text}</div>
                </div>
            `).join('');
        }

        function populatePricing() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('pricingList');
            
            list.innerHTML = content.pricing.map(p => `
                <div class="pricing-card">
                    <div class="pricing-name">${p.name}</div>
                    <div class="pricing-attempts">${p.attempts}</div>
                    <div class="pricing-price">${p.price}</div>
                    <button class="btn-buy" onclick="buyPlan('${p.name}')">${content.btn_buy}</button>
                </div>
            `).join('');
        }

        function populateHowWorks() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('howWorksList');
            
            list.innerHTML = content.how_works.map(h => `
                <div class="instruction-block">
                    <h3>${h.title}</h3>
                    <p>${h.text}</p>
                </div>
            `).join('');
        }

        function populateDVForm() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('dvFormList');
            
            list.innerHTML = content.dv_form.map(d => `
                <div class="instruction-block">
                    <h3>${d.title}</h3>
                    <p>${d.text}</p>
                </div>
            `).join('');
        }

        function updateBackButtons() {
            const content = CONTENT[appState.currentLang];
            ['backBtn1', 'backBtn2', 'backBtn3', 'backBtn4'].forEach(id => {
                const btn = document.getElementById(id);
                btn.textContent = content.btn_back;
            });
        }

        function showSection(section) {
            document.getElementById('menuView').style.display = 'none';
            document.getElementById('appTabs').classList.remove('active');
            
            const tabName = section === 'howWorks' ? 'howWorks' : section === 'dvForm' ? 'dvForm' : section;
            document.getElementById(tabName + 'Tab').classList.add('active');
            document.getElementById('appTabs').classList.add('active');
        }

        function backToMenu() {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById('appTabs').classList.remove('active');
            document.getElementById('menuView').style.display = 'flex';
        }

        function applyPromoCode() {
            const code = document.getElementById('promoCode').value.toUpperCase();
            const content = CONTENT[appState.currentLang];
            
            if (code === 'GIFT2026') {
                appState.attempts += 5;
                document.getElementById('attemptsCount').textContent = appState.attempts;
                alert(content.promo_success);
                document.getElementById('promoCode').value = '';
            } else {
                alert(content.promo_invalid);
            }
        }

        function buyPlan(planName) {
            // Open Telegram Stars payment or external payment link
            window.Telegram?.WebApp?.openLink('https://t.me/Stars4tonBot?start=buy_' + planName.replace(/\s+/g, '_'));
        }

        // Smooth transitions
        const style = document.createElement('style');
        style.textContent = `
            #splashSubtitle {
                transition: opacity 0.3s ease;
            }
            .app-content {
                transition: all 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>



