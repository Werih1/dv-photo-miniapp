<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>DV-Lottery Photo Check</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #333;
            overflow: hidden;
        }

        /* ===== SPLASH SCREEN ===== */
        .splash {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(25, 78, 132, 0.65), rgba(25, 78, 132, 0.65)), url('images/logo.png') center/cover no-repeat;
            padding: 30px 20px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .splash.hidden {
            display: none;
        }

        .splash-top {
            flex: 0.5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .splash-title {
            font-size: 32px;
            font-weight: 700;
            color: white;
            text-align: center;
            line-height: 1.2;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            letter-spacing: -0.5px;
        }

        .splash-middle {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .splash-bottom {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            justify-content: center;
        }

        .splash-subtitle {
            font-size: 16px;
            color: rgba(255,255,255,0.95);
            height: 22px;
            min-height: 22px;
            font-weight: 500;
            text-align: center;
            margin-bottom: 12px;
        }

        .language-selector-splash {
            display: flex;
            gap: 14px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .lang-btn-splash {
            width: 65px;
            height: 65px;
            border: 3px solid white;
            border-radius: 14px;
            background: rgba(255,255,255,0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .lang-btn-splash img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 11px;
        }

        .lang-btn-splash:active {
            transform: scale(1.08);
            border-color: rgba(255,255,255,0.8);
            box-shadow: 0 6px 20px rgba(255,255,255,0.3);
        }

        /* ===== MAIN APP ===== */
        .app {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            overflow: hidden;
            background: #f8f9fa;
        }

        .app.active {
            display: flex;
        }

        /* ===== APP HEADER ===== */
        .app-header {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .app-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .attempts-badge {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(255,255,255,0.25);
            color: white;
            border-radius: 20px;
            font-weight: 600;
            font-size: 13px;
            backdrop-filter: blur(10px);
        }

        /* ===== MAIN CONTENT ===== */
        .app-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .upload-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            appearance: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(25, 78, 132, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        /* ===== MENU SECTIONS ===== */
        .menu-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .menu-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-height: 100px;
            justify-content: center;
        }

        .menu-item-icon {
            font-size: 24px;
        }

        .menu-item-text {
            font-size: 12px;
            font-weight: 600;
            color: #194E84;
            line-height: 1.3;
        }

        .menu-item:active {
            border-color: #194E84;
            background: rgba(25, 78, 132, 0.05);
            transform: scale(0.98);
        }

        /* ===== TAB CONTENT ===== */
        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            -webkit-overflow-scrolling: touch;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        /* ===== BACK BUTTON ===== */
        .back-btn {
            background: white;
            border: 2px solid #194E84;
            color: #194E84;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 16px;
            width: fit-content;
        }

        .back-btn:active {
            background: rgba(25, 78, 132, 0.1);
        }

        /* ===== NEWS CARDS ===== */
        .news-full-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .news-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #194E84;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .news-card-date {
            font-size: 12px;
            color: #194E84;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .news-card-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .news-card-text {
            font-size: 13px;
            line-height: 1.6;
            color: #555;
        }

        /* ===== PRICING ===== */
        .promo-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            background: white;
            padding: 12px;
            border-radius: 12px;
        }

        .promo-input-group input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            color: #333;
        }

        .promo-input-group input::placeholder {
            color: #999;
            font-style: italic;
        }

        /* ===== PAGINATION ===== */
        .pagination {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .pagination-btn {
            padding: 8px 12px;
            border: 2px solid #194E84;
            background: white;
            color: #194E84;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .pagination-btn:active,
        .pagination-btn.active {
            background: #194E84;
            color: white;
        }

        .promo-input-group button {
            padding: 10px 16px;
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .pricing-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .pricing-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .pricing-card:active {
            border-color: #194E84;
            box-shadow: 0 4px 12px rgba(25, 78, 132, 0.2);
        }

        .pricing-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .pricing-attempts {
            font-size: 13px;
            color: #194E84;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .pricing-price {
            font-size: 20px;
            font-weight: 700;
            color: #194E84;
            margin-bottom: 12px;
        }

        .pricing-description-toggle {
            font-size: 12px;
            color: #194E84;
            font-weight: 600;
            text-decoration: underline;
            cursor: pointer;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .pricing-description-toggle:active {
            opacity: 0.7;
        }

        .pricing-description {
            display: none;
            font-size: 12px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(25, 78, 132, 0.05);
            border-radius: 8px;
        }

        .pricing-description.active {
            display: block;
        }

        .btn-buy {
            background: linear-gradient(135deg, #194E84 0%, #1a5a99 100%);
            color: white;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
        }

        .btn-buy:active {
            transform: scale(0.98);
        }

        /* ===== INSTRUCTIONS ===== */
        .instructions {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .instruction-block {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #194E84;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .instruction-block h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .instruction-block p {
            font-size: 13px;
            line-height: 1.8;
            color: #555;
        }

        .how-works-unified {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .how-works-section {
            margin-bottom: 16px;
        }

        .how-works-section:last-child {
            margin-bottom: 0;
        }

        .how-works-section h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .how-works-section p {
            font-size: 13px;
            line-height: 1.8;
            color: #555;
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #999;
        }
    </style>
<style>
        :root {
            --color-primary: #2196F3;
            --color-success: #4CAF50;
            --color-error: #f44336;
            --color-warning: #ff9800;
            --color-bg: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #333333;
            --color-text-secondary: #666666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .lang-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
        }

        .lang-btn {
            padding: 6px 12px;
            border: 1px solid var(--color-primary);
            background: white;
            color: var(--color-primary);
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: var(--color-primary);
            color: white;
        }

        .card {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .upload-section {
            text-align: center;
            padding: 40px 20px;
            border: 2px dashed var(--color-primary);
            border-radius: 12px;
            background-color: rgba(33, 150, 243, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .upload-section:hover {
            border-color: var(--color-primary);
            background-color: rgba(33, 150, 243, 0.1);
        }

        .upload-section input {
            display: none;
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .upload-text {
            font-size: 16px;
            font-weight: 500;
            color: var(--color-primary);
            margin-bottom: 5px;
        }

        .upload-hint {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .btn {
            width: 100%;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .btn-primary {
            background-color: var(--color-primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background-color: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .btn-secondary {
            background-color: var(--color-success);
            color: white;
        }

        .btn-secondary:hover:not(:disabled) {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .canvas-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
            margin-bottom: 20px;
        }

        #previewImage {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            border-radius: 8px;
            background: #f0f0f0;
            display: block;
        }

        #lineCanvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: grab;
            border-radius: 8px;
        }

        #lineCanvas:active {
            cursor: grabbing;
        }

        .drag-hint {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-bottom: 15px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.02);
            border-radius: 6px;
            text-align: center;
        }

        .line-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .line-controls.show {
            display: grid;
        }

        .line-control {
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-size: 11px;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .line-control img {
            width: 110px;
            height: 110px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid;
        }

        .line-control.red {
            background-color: rgba(244, 67, 54, 0.1);
            border: 2px solid #f44336;
            color: #f44336;
        }

        .line-control.red img {
            border-color: #f44336;
        }

        .line-control.green {
            background-color: rgba(76, 175, 80, 0.1);
            border: 2px solid #4CAF50;
            color: #4CAF50;
        }

        .line-control.green img {
            border-color: #4CAF50;
        }

        .line-control.yellow {
            background-color: rgba(255, 193, 7, 0.1);
            border: 2px solid #FFC107;
            color: #F57F17;
        }

        .line-control.yellow img {
            border-color: #FFC107;
        }

        .line-control-description {
            font-size: 10px;
            line-height: 1.3;
            font-weight: 500;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .result {
            display: none;
            margin-top: 20px;
        }

        .result.show {
            display: block;
        }

        .result-image {
            text-align: center;
            margin-bottom: 20px;
        }

        #resultImage {
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1;
            border-radius: 8px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .criteria-list {
            list-style: none;
            margin-bottom: 20px;
        }

        .criteria-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
        }

        .criteria-item:last-child {
            border-bottom: none;
        }

        .criteria-status {
            font-size: 18px;
            min-width: 20px;
            text-align: center;
        }

        .criteria-status.ok {
            color: var(--color-success);
        }

        .criteria-status.fail {
            color: var(--color-error);
        }

        .criteria-name {
            flex: 1;
            font-weight: 500;
        }

        .criteria-value {
            text-align: right;
            color: var(--color-text-secondary);
            min-width: 80px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .button-group .btn {
            flex: 1;
        }

        .success-banner {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--color-success);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            color: var(--color-success);
            font-weight: 600;
        }

        .error-banner {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--color-error);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            color: var(--color-error);
            font-weight: 600;
        }

        .warning-banner {
            background: rgba(255, 193, 7, 0.15);
            border-left: 4px solid var(--color-warning);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-weight: 500;
            font-size: 13px;
            line-height: 1.5;
        }

        .warning-banner strong {
            color: #F57F17;
        }

        .warning-banner p {
            color: #333333;
            margin: 8px 0;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 22px;
            }

            .card {
                padding: 16px;
            }

            .button-group {
                flex-direction: column;
            }

            .lang-switcher {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }

            .line-controls {
                grid-template-columns: 1fr;
            }

            .line-control img {
                width: 130px;
                height: 130px;
            }
        }
    </style>
</head>
<body>
    <!-- SPLASH SCREEN -->
    <div class="splash" id="splashScreen">
        <div class="splash-top">
            <div class="splash-title">DV-Lottery<br>Photo Check</div>
        </div>
        
        <div class="splash-middle"></div>

        <div class="splash-bottom">
            <div class="splash-subtitle" id="splashSubtitle">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫</div>
            <div class="language-selector-splash">
                <button class="lang-btn-splash" data-lang="ru" title="–†—É—Å—Å–∫–∏–π">
                    <img src="images/russia.png" alt="–†—É—Å—Å–∫–∏–π">
                </button>
                <button class="lang-btn-splash" data-lang="en" title="English">
                    <img src="images/united.png" alt="English">
                </button>
                <button class="lang-btn-splash" data-lang="fr" title="Fran√ßais">
                    <img src="images/france.png" alt="Fran√ßais">
                </button>
                <button class="lang-btn-splash" data-lang="ar" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
                    <img src="images/emirates.png" alt="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div class="app" id="mainApp">
        <!-- APP HEADER -->
        <div class="app-header">
            <div class="app-title">DV-Lottery Photo Check</div>
            <div class="attempts-badge"><span id="attemptsLabel">–û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–æ–∫:</span> <span id="attemptsCount">3</span></div>
        </div>

        <!-- MAIN MENU VIEW -->
        <div id="menuView" class="app-content">
            <div class="upload-section">
                <button class="button btn-primary" id="uploadBtn">üì∏ –ó–ê–ì–†–£–ó–ò–¢–¨ –§–û–¢–û</button>
            </div>

            <div class="menu-sections">
                <div class="menu-item" id="menuHowItWorks">
                    <div class="menu-item-icon">‚ùì</div>
                    <div class="menu-item-text" id="textHowWorks">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                </div>

                <div class="menu-item" id="menuNews">
                    <div class="menu-item-icon">üì∞</div>
                    <div class="menu-item-text" id="textNews">–ù–æ–≤–æ—Å—Ç–∏</div>
                </div>

                <div class="menu-item" id="menuPricing">
                    <div class="menu-item-icon">üí≥</div>
                    <div class="menu-item-text" id="textPricing">–¢–∞—Ä–∏—Ñ—ã</div>
                </div>

                <div class="menu-item" id="menuDVForm">
                    <div class="menu-item-icon">üìù</div>
                    <div class="menu-item-text" id="textDVForm">–ö–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å DV 2027</div>
                </div>

                <div class="menu-item" id="menuSupport" style="grid-column: 1 / -1;">
                    <div class="menu-item-icon" style="font-size: 32px; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #0088cc 0%, #0077b6 100%); border-radius: 8px; color: white;">
                        <img src="images/TGlogo.png" alt="Telegram" style="width: 20px; height: 20px; object-fit: contain;">
                    </div>
                    <div class="menu-item-text" id="textSupport">–ú—ã –≤ Telegram</div>
                </div>
            </div>
        </div>

        <!-- HOW IT WORKS -->
        <div class="tab-content" id="howWorksTab">
            <button class="back-btn" id="backBtn1">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="instructions" id="howWorksList"></div>
        </div>

        <!-- NEWS TAB -->
        <div class="tab-content" id="newsTab">
            <button class="back-btn" id="backBtn2">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="news-full-container" id="newsFullList"></div>
        </div>

        <!-- PRICING TAB -->
        <div class="tab-content" id="pricingTab">
            <button class="back-btn" id="backBtn3">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="promo-input-group">
                <input type="text" id="promoCode" autocomplete="off" placeholder="">
                <button id="applyPromoBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
            <div class="pricing-section" id="pricingList"></div>
        </div>

        <!-- DV FORM TAB -->
        <div class="tab-content" id="dvFormTab">
            <button class="back-btn" id="backBtn4">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="instructions" id="dvFormList"></div>
        </div>
    </div>

    <input type="file" id="photoInput" accept="image/*" style="display: none;">

    <script>
        // ADMIN IDS
        const ADMIN_IDS = [380950248, 375133882];

        // ===== MULTILINGUAL CONTENT =====
        const CONTENT = {
            ru: {
                selectLanguage: '–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫',
                title: 'DV-Lottery Photo Check',
                attempts_label: '–û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–æ–∫:',
                btn_upload: 'üì∏ –ó–ê–ì–†–£–ó–ò–¢–¨ –§–û–¢–û',
                btn_how_works: '–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç',
                btn_news: '–ù–æ–≤–æ—Å—Ç–∏',
                btn_pricing: '–¢–∞—Ä–∏—Ñ—ã',
                btn_dv_form: '–ö–∞–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç—å DV-2027',
                btn_support: '–ú—ã –≤ Telegram',
                promo_placeholder: '–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥',
                btn_apply: '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',
                btn_back: '‚Üê –ù–∞–∑–∞–¥',
                btn_buy: '–ö—É–ø–∏—Ç—å',
                description_toggle: '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞',
                promo_success: '‚úì –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! +5 –ø–æ–ø—ã—Ç–æ–∫',
                promo_invalid: '‚úó –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥',
                upload_success: '‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!',
                support_link: 'https://t.me/USAvisaPhoto',
                pricing: [
                    { 
                        name: '–°–æ–ª–æ Plan', 
                        attempts: '10 –ø–æ–ø—ã—Ç–æ–∫', 
                        price: '99 ‚≠ê',
                        description: '–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –ø–æ–¥–∞—ë—Ç–µ—Å—å –æ–¥–∏–Ω.\n10 –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–ø–æ–∫–æ–π–Ω–æ –ø–µ—Ä–µ—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å—Å—è.\n–ü–æ–¥–æ–π–¥—ë—Ç —Ç–µ–º, –∫—Ç–æ —É–∂–µ –∏–º–µ–ª –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ç–æ –∏ —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç—ã.'
                    },
                    { 
                        name: '–°–µ–º–µ–π–Ω—ã–π DV', 
                        attempts: '30 –ø–æ–ø—ã—Ç–æ–∫', 
                        price: '249 ‚≠ê',
                        description: '–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–∞—á–∏ –≤—Å–µ–π —Å–µ–º—å–∏.\n–ü–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –ø–æ–¥–∞—ë—Ç–µ—Å—å –≤–º–µ—Å—Ç–µ —Å —Å—É–ø—Ä—É–≥–æ–º/—Å—É–ø—Ä—É–≥–æ–π ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ –≤—Å–µ —Ñ–æ—Ç–æ –≤ —Å–ø–æ–∫–æ–π–Ω–æ–º —Ç–µ–º–ø–µ.\n–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–µ—Ç–∏, 30 –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏, –≤–∫–ª—é—á–∞—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–Ω–∏–º–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.'
                    },
                    { 
                        name: 'Agency PRO', 
                        attempts: '–ë–µ–∑–ª–∏–º–∏—Ç', 
                        price: '2499 ‚≠ê',
                        description: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.\n–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ñ–æ—Ç–æ–∞—Ç–µ–ª—å–µ, –∞–≥–µ–Ω—Ç—Å—Ç–≤, —á–∞—Å—Ç–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤, –≤–∏–∑–æ–≤—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –±–ª–æ–≥–µ—Ä–æ–≤ –∏ –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞.\n–í –ø–µ—Ä–∏–æ–¥ –º–∞—Å—Å–æ–≤–æ–π –ø–æ–¥–∞—á–∏ –∞–Ω–∫–µ—Ç —Ç–∞—Ä–∏—Ñ –æ–∫—É–ø–∞–µ—Ç—Å—è –∑–∞ 1‚Äì2 –¥–Ω—è –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.\n–ë–µ–∑–ª–∏–º–∏—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤ —Å –¥–∞—Ç—ã –ø–æ–∫—É–ø–∫–∏ ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–æ–ª—å—à–∏–º –ø–æ—Ç–æ–∫–æ–º –∫–ª–∏–µ–Ω—Ç–æ–≤.'
                    }
                ],
                how_works: [
                    { title: '–ß—Ç–æ —ç—Ç–æ?', text: 'DV-Lottery Photo Check ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ —Ç–æ—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞—à—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π –∑–∞—è–≤–∫–∏ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –ª–æ—Ç–µ—Ä–µ–µ Green Card üá∫üá∏' },
                    { title: '–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?', text: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ ‚Üí —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –≤—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π.' },
                    { title: '–ß—Ç–æ –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º?', text: '‚úì –†–∞–∑–º–µ—Ä –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ\n‚úì –Ø—Ä–∫–æ—Å—Ç—å, —á—ë—Ç–∫–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç –ª–∏—Ü–∞\n‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ–¥–Ω–æ—Ç–æ–Ω–Ω—ã–π —Ñ–æ–Ω\n‚úì –ü–æ–ª–æ–∂–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã –∏ —É—Ä–æ–≤–µ–Ω—å –≥–ª–∞–∑\n‚úì –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è' },
                    { title: '–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?', text: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –ø—Ä–∏—á–∏–Ω –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏.\n–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∞—à–µ —Ñ–æ—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∏ –≥–æ—Ç–æ–≤–æ –∫ –ø–æ–¥–∞—á–µ.' },
                    { title: '–ö–∞–∫ –Ω–∞—á–∞—Ç—å?', text: '–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º 3 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–ø–æ–∫–æ–π–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–≤–æ—ë —Ñ–æ—Ç–æ.\n–ï—Å–ª–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–µ, –≤—ã –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ –¢–∞—Ä–∏—Ñ—ã ‚Äî –≤—ã–±—Ä–∞–≤ —É–¥–æ–±–Ω—ã–π –¥–ª—è —Å–µ–±—è –≤–∞—Ä–∏–∞–Ω—Ç.\n–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –º—ã –ø—É–±–ª–∏–∫—É–µ–º –ø—Ä–æ–º–æ–∫–æ–¥—ã –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –Ω–∞—à–µ–º Telegram-–∫–∞–Ω–∞–ª–µ.\n–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –Ω–µ–≥–æ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª "–ú—ã –≤ Telegram" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é.' }
                ],
                news: [
                    { date: '27.11.2025', title: '–ù–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ', text: '–£–ª—É—á—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —è–∑—ã–∫–æ–≤' },
                    { date: '26.11.2025', title: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤', text: '–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –†—É—Å—Å–∫–æ–º, –ê–Ω–≥–ª–∏–π—Å–∫–æ–º, –§—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–º –∏ –ê—Ä–∞–±—Å–∫–æ–º —è–∑—ã–∫–∞—Ö' },
                    { date: '28.11.2025', title: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ DV-2027: –∂–¥—ë–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç', text: '–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ª–æ—Ç–µ—Ä–µ—è DV-2027 –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å. –°–®–ê –ø–æ–∫–∞ –Ω–µ –ø—É–±–ª–∏–∫–æ–≤–∞–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —Å–æ—Å—Ç–æ–∏—Ç—Å—è –ª–∏ —Å—Ç–∞—Ä—Ç –≤ –∫–æ–Ω—Ü–µ 2025 –≥–æ–¥–∞ –∏–ª–∏ —É–∂–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 2026. –ú—ã –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥–∏–º –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏ —Å–æ–æ–±—â–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∞–Ω–æ–Ω—Å–∞.\n\n–ö–∞–∫ —Ç–æ–ª—å–∫–æ –ì–æ—Å–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –æ–±—ä—è–≤–∏—Ç –æ –Ω–∞—á–∞–ª–µ DV-2027, –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–æ–¥—Ä–æ–±–Ω—É—é –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–ø–æ–∫–æ–π–Ω–æ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É.\n\n–í–∞–∂–Ω–æ: –ø–æ–¥–∞–≤–∞–π—Ç–µ –∑–∞—è–≤–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ\n–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã DV –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –ú—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–µ –ø–æ–ª—å–∑—É—è—Å—å —É—Å–ª—É–≥–∞–º–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –µ—ë –∑–∞ –¥–µ–Ω—å–≥–∏.\n\n–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:\n‚Ä¢ –í—ã —Ä–∏—Å–∫—É–µ—Ç–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞—è–≤–∫–æ–π\n‚Ä¢ –ú–æ–∂–µ—Ç–µ –ª–∏—à–∏—Ç—å—Å—è Confirmation Number\n‚Ä¢ –í–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç —Ä–∏—Å–∫ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å –º–æ—à–µ–Ω–Ω–∏–∫–∞–º–∏\n\n–í –Ω–∞—à–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º –∫–∞–∂–¥—ã–π —à–∞–≥ –ø–æ–¥–∞—á–∏, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∏—Ç—å –ª—é–±—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏.\n\n–í–æ–∑–º–æ–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ DV-2027\n–ü–æ –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –ø–æ—à–ª–∏–Ω—ã –∑–∞ –ø–æ–¥–∞—á—É –∑–∞—è–≤–∫–∏. –ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∏ –æ —Ü–µ–Ω–µ, –Ω–∏ –æ —Ç–æ–º, –±—É–¥–µ—Ç –ª–∏ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ.\n\n–ï—Å–ª–∏ –ø–ª–∞—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è, –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –æ —Ç–æ–º:\n‚Ä¢ –ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å –ø–æ—à–ª–∏–Ω—É\n‚Ä¢ –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤–∞—à–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è\n‚Ä¢ –ö–∞–∫–∏–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã\n\n–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏\n–ú—ã –æ–±–Ω–æ–≤–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç –ì–æ—Å–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –°–®–ê. –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å —Å –Ω–∞–º–∏, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—Ç DV-2027 –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–¥–∞—á–µ –∑–∞—è–≤–∫–∏.' }
                ],
                dv_form_content: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ DV-2027: –∂–¥—ë–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç\n\n–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ª–æ—Ç–µ—Ä–µ—è DV-2027 –µ—â—ë –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å. –°–®–ê –ø–æ–∫–∞ –Ω–µ –ø—É–±–ª–∏–∫–æ–≤–∞–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —Å–æ—Å—Ç–æ–∏—Ç—Å—è –ª–∏ —Å—Ç–∞—Ä—Ç –≤ –∫–æ–Ω—Ü–µ 2025 –≥–æ–¥–∞ –∏–ª–∏ —É–∂–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ 2026. –ú—ã –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥–∏–º –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏ —Å–æ–æ–±—â–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∞–Ω–æ–Ω—Å–∞.\n\n–ö–∞–∫ —Ç–æ–ª—å–∫–æ –ì–æ—Å–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –æ–±—ä—è–≤–∏—Ç –æ –Ω–∞—á–∞–ª–µ DV-2027, –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–æ–¥—Ä–æ–±–Ω—É—é –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–ø–æ–∫–æ–π–Ω–æ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É.\n\n–í–∞–∂–Ω–æ: –ø–æ–¥–∞–≤–∞–π—Ç–µ –∑–∞—è–≤–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ\n–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã DV –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –ú—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–µ –ø–æ–ª—å–∑—É—è—Å—å —É—Å–ª—É–≥–∞–º–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –µ—ë –∑–∞ –¥–µ–Ω—å–≥–∏.\n\n–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:\n‚Ä¢ –í—ã —Ä–∏—Å–∫—É–µ—Ç–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞—è–≤–∫–æ–π\n‚Ä¢ –ú–æ–∂–µ—Ç–µ –ª–∏—à–∏—Ç—å—Å—è Confirmation Number\n‚Ä¢ –í–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç —Ä–∏—Å–∫ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å –º–æ—à–µ–Ω–Ω–∏–∫–∞–º–∏\n\n–í –Ω–∞—à–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º –∫–∞–∂–¥—ã–π —à–∞–≥ –ø–æ–¥–∞—á–∏, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∏—Ç—å –ª—é–±—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏.\n\n–í–æ–∑–º–æ–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ DV-2027\n–ü–æ –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –ø–æ—à–ª–∏–Ω—ã –∑–∞ –ø–æ–¥–∞—á—É –∑–∞—è–≤–∫–∏. –ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∏ –æ —Ü–µ–Ω–µ, –Ω–∏ –æ —Ç–æ–º, –±—É–¥–µ—Ç –ª–∏ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ.\n\n–ï—Å–ª–∏ –ø–ª–∞—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è, –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –æ —Ç–æ–º:\n‚Ä¢ –ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å –ø–æ—à–ª–∏–Ω—É\n‚Ä¢ –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤–∞—à–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è\n‚Ä¢ –ö–∞–∫–∏–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã\n\n–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏\n–ú—ã –æ–±–Ω–æ–≤–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç –ì–æ—Å–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –°–®–ê. –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å —Å –Ω–∞–º–∏, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—Ç DV-2027 –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–¥–∞—á–µ –∑–∞—è–≤–∫–∏.'
            },
            en: {
                selectLanguage: 'Select language',
                title: 'DV-Lottery Photo Check',
                attempts_label: 'Attempts left:',
                btn_upload: 'üì∏ UPLOAD PHOTO',
                btn_how_works: 'How it works',
                btn_news: 'News',
                btn_pricing: 'Pricing',
                btn_dv_form: 'How to fill DV-2027',
                btn_support: 'We on Telegram',
                promo_placeholder: 'Enter promo code',
                btn_apply: 'Apply',
                btn_back: '‚Üê Back',
                btn_buy: 'Buy',
                description_toggle: 'Plan Description',
                promo_success: '‚úì Promo code accepted! +5 attempts',
                promo_invalid: '‚úó Invalid promo code',
                upload_success: '‚úÖ Photo uploaded!',
                support_link: 'https://t.me/USAvisaPhoto',
                pricing: [
                    { 
                        name: 'Solo Plan', 
                        attempts: '10 attempts', 
                        price: '99 ‚≠ê',
                        description: 'Perfect if you\'re applying alone.\n10 checks are enough to make several attempts and comfortably retake photos if needed.\nIdeal for those who already have experience using photo verification tools and want everything necessary without overpaying.'
                    },
                    { 
                        name: 'Family DV', 
                        attempts: '30 attempts', 
                        price: '249 ‚≠ê',
                        description: 'Best solution for submitting with your whole family.\nPerfect if you\'re applying with your spouse ‚Äî checks are enough for all photos at a comfortable pace.\nIf you have children, 30 checks are more than enough for all family members, including retakes if needed.'
                    },
                    { 
                        name: 'Agency PRO', 
                        attempts: 'Unlimited', 
                        price: '2499 ‚≠ê',
                        description: 'Maximum freedom without limits.\nPerfect for photo studios, agencies, professional photographers, visa specialists, bloggers and small businesses.\nDuring peak application periods, the plan pays for itself in 1-2 days of active work.\nUnlimited checks for 6 months from purchase date ‚Äî a professional solution for those working with high client volumes.'
                    }
                ],
                how_works: [
                    { title: 'What is it?', text: 'DV-Lottery Photo Check ‚Äî a tool that helps you quickly and accurately verify your photo before submitting your application for the Green Card Lottery üá∫üá∏' },
                    { title: 'How does it work?', text: 'Upload your photo ‚Üí system automatically analyzes all key parameters ‚Üí you instantly get results and recommendations for your verified photo.' },
                    { title: 'What do we verify?', text: '‚úì Size and resolution\n‚úì Face brightness, clarity and contrast\n‚úì Correct solid background\n‚úì Head position and eye level\n‚úì File format and technical requirements' },
                    { title: 'Why do you need it?', text: 'Photo is one of the most common reasons for application rejection.\nVerification helps ensure your photo meets official standards and is ready to submit.' },
                    { title: 'How to start?', text: 'We provide 3 free checks so you can calmly test the service and prepare your photo.\nIf you need more, you can purchase additional checks in the Pricing section at any time ‚Äî choose a plan that works for you.\nWe regularly publish promo codes for free checks in our Telegram channel.\nYou can subscribe to it through the "We on Telegram" section in the main menu.' }
                ],
                news: [
                    { date: '27.11.2025', title: 'New Update', text: 'Improved face detection accuracy and added support for 4 languages' },
                    { date: '26.11.2025', title: 'Language Support', text: 'Now available in Russian, English, French, and Arabic' },
                    { date: '28.11.2025', title: 'DV-2027 Update: Waiting for Official Start', text: 'At this moment, the DV-2027 lottery has not yet started. The USA has not yet published official registration dates, and it is unclear whether the start will occur in late 2025 or be postponed to 2026. We are closely monitoring updates and will share the information immediately after the announcement.\n\nOnce the State Department announces the start of DV-2027, we will prepare a detailed step-by-step guide for filling out the application form so you can calmly and independently submit your application.\n\nImportant: Submit your application independently\nFilling out the DV application form is not a complicated process. We strongly recommend submitting your application independently, without using the services of intermediaries who offer to fill it out for money.\n\nWhy is this important:\n‚Ä¢ You risk losing control of your application\n‚Ä¢ You may lose your Confirmation Number\n‚Ä¢ Risk of encountering scammers increases\n\nIn our section, we will analyze each step of the application process in detail to completely eliminate any difficulties.\n\nPossible changes in DV-2027\nAccording to unofficial reports, there is a possibility of introducing a mandatory fee for submitting an application. There is currently no confirmed information about the price or whether this change will be adopted.\n\nIf the fee does appear, we will prepare a detailed guide on:\n‚Ä¢ How to pay the fee\n‚Ä¢ What to do if your bank card is not accepted\n‚Ä¢ What alternative payment methods are available\n\nFollow the news\nWe will update the information immediately after the official announcement from the US State Department. Stay with us so you don\'t miss the start of DV-2027 and get accurate instructions for submitting your application.' }
                ],
                dv_form_content: 'DV-2027 Update: Waiting for Official Start\n\nAt this moment, the DV-2027 lottery has not yet started. The USA has not yet published official registration dates, and it is unclear whether the start will occur in late 2025 or be postponed to 2026. We are closely monitoring updates and will share the information immediately after the announcement.\n\nOnce the State Department announces the start of DV-2027, we will prepare a detailed step-by-step guide for filling out the application form so you can calmly and independently submit your application.\n\nImportant: Submit your application independently\nFilling out the DV application form is not a complicated process. We strongly recommend submitting your application independently, without using the services of intermediaries who offer to fill it out for money.\n\nWhy is this important:\n‚Ä¢ You risk losing control of your application\n‚Ä¢ You may lose your Confirmation Number\n‚Ä¢ Risk of encountering scammers increases\n\nIn our section, we will analyze each step of the application process in detail to completely eliminate any difficulties.\n\nPossible changes in DV-2027\nAccording to unofficial reports, there is a possibility of introducing a mandatory fee for submitting an application. There is currently no confirmed information about the price or whether this change will be adopted.\n\nIf the fee does appear, we will prepare a detailed guide on:\n‚Ä¢ How to pay the fee\n‚Ä¢ What to do if your bank card is not accepted\n‚Ä¢ What alternative payment methods are available\n\nFollow the news\nWe will update the information immediately after the official announcement from the US State Department. Stay with us so you don\'t miss the start of DV-2027 and get accurate instructions for submitting your application.'
            },
            fr: {
                selectLanguage: 'Choisir la langue',
                title: 'V√©rification Photo DV-Lottery',
                attempts_label: 'Tentatives restantes:',
                btn_upload: 'üì∏ T√âL√âCHARGER',
                btn_how_works: 'Comment √ßa marche',
                btn_news: 'Actualit√©s',
                btn_pricing: 'Tarifs',
                btn_dv_form: 'Comment remplir DV-2027',
                btn_support: 'Nous sur Telegram',
                promo_placeholder: 'Entrez le code promo',
                btn_apply: 'Appliquer',
                btn_back: '‚Üê Retour',
                btn_buy: 'Acheter',
                description_toggle: 'Description du plan',
                promo_success: '‚úì Code promo accept√©! +5 tentatives',
                promo_invalid: '‚úó Code promo invalide',
                upload_success: '‚úÖ Photo t√©l√©charg√©e!',
                support_link: 'https://t.me/USAvisaPhoto',
                pricing: [
                    { 
                        name: 'Plan Solo', 
                        attempts: '10 tentatives', 
                        price: '99 ‚≠ê',
                        description: 'Parfait si vous postulez seul.\n10 v√©rifications suffisent pour faire plusieurs tentatives et reprendre les photos tranquillement si n√©cessaire.\nId√©al pour ceux qui ont d√©j√† de l\'exp√©rience avec les outils de v√©rification de photos et qui veulent tout le n√©cessaire sans surpayer.'
                    },
                    { 
                        name: 'Famille DV', 
                        attempts: '30 tentatives', 
                        price: '249 ‚≠ê',
                        description: 'Meilleure solution pour toute la famille.\nParfait si vous postulez avec votre conjoint ‚Äî les v√©rifications suffisent pour toutes les photos √† votre rythme.\nSi vous avez des enfants, 30 v√©rifications sont plus que suffisantes pour tous les membres de la famille, y compris les reprises si n√©cessaire.'
                    },
                    { 
                        name: 'Agence PRO', 
                        attempts: 'Illimit√©', 
                        price: '2499 ‚≠ê',
                        description: 'Libert√© maximale sans limites.\nParfait pour les studios photo, agences, photographes professionnels, sp√©cialistes visa, blogueurs et petites entreprises.\nPendant les p√©riodes de forte activit√©, le plan se rembourse en 1-2 jours de travail actif.\nV√©rifications illimit√©es pendant 6 mois √† partir de la date d\'achat ‚Äî une solution professionnelle pour ceux travaillant avec de gros volumes de clients.'
                    }
                ],
                how_works: [
                    { title: 'Qu\'est-ce que c\'est?', text: 'DV-Lottery Photo Check ‚Äî un outil qui vous aide √† v√©rifier rapidement et pr√©cis√©ment votre photo avant de soumettre votre candidature √† la loterie Green Card üá∫üá∏' },
                    { title: 'Comment √ßa marche?', text: 'T√©l√©chargez votre photo ‚Üí le syst√®me analyse automatiquement tous les param√®tres cl√©s ‚Üí vous obtenez instantan√©ment les r√©sultats et les recommandations pour votre photo v√©rifi√©e.' },
                    { title: 'Que v√©rifions-nous?', text: '‚úì Taille et r√©solution\n‚úì Luminosit√©, nettet√© et contraste du visage\n‚úì Fond uni correct\n‚úì Position de la t√™te et niveau des yeux\n‚úì Format du fichier et exigences techniques' },
                    { title: 'Pourquoi c\'est important?', text: 'La photo est l\'une des raisons les plus courantes du rejet d\'une candidature.\nLa v√©rification vous aide √† vous assurer que votre photo respecte les normes officielles et est pr√™te √† √™tre soumise.' },
                    { title: 'Comment commencer?', text: 'Nous fournissons 3 v√©rifications gratuites pour que vous puissiez tester tranquillement le service et pr√©parer votre photo.\nSi vous en avez besoin de plus, vous pouvez acheter des v√©rifications suppl√©mentaires dans la section Tarifs √† tout moment ‚Äî choisissez un plan qui vous convient.\nNous publions r√©guli√®rement des codes promo pour des v√©rifications gratuites dans notre canal Telegram.\nVous pouvez vous y abonner via la section "Nous sur Telegram" du menu principal.' }
                ],
                news: [
                    { date: '27.11.2025', title: 'Nouvelle mise √† jour', text: 'Pr√©cision am√©lior√©e de la d√©tection des visages et support de 4 langues' },
                    { date: '26.11.2025', title: 'Support multilingue', text: 'Disponible en russe, anglais, fran√ßais et arabe' },
                    { date: '28.11.2025', title: 'Mise √† jour DV-2027 : En attente du d√©marrage officiel', text: '√Ä ce moment, la loterie DV-2027 n\'a pas encore commenc√©. Les √âtats-Unis n\'ont pas encore publi√© les dates officielles d\'inscription, et on ne sait pas si le d√©marrage aura lieu fin 2025 ou sera report√© √† 2026. Nous suivons de pr√®s les mises √† jour et partagerons l\'information imm√©diatement apr√®s l\'annonce.\n\nUne fois que le D√©partement d\'√âtat annoncera le d√©marrage de DV-2027, nous pr√©parerons un guide d√©taill√© et √©tape par √©tape pour remplir le formulaire de demande afin que vous puissiez soumettre votre demande calmement et ind√©pendamment.\n\nImportant : Soumettez votre demande ind√©pendamment\nRemplir le formulaire de demande DV n\'est pas un processus compliqu√©. Nous vous recommandons vivement de soumettre votre demande ind√©pendamment, sans utiliser les services d\'interm√©diaires qui proposent de la remplir contre r√©mun√©ration.\n\nPourquoi est-ce important :\n‚Ä¢ Vous risquez de perdre le contr√¥le de votre demande\n‚Ä¢ Vous pouvez perdre votre num√©ro de confirmation\n‚Ä¢ Le risque de rencontrer des arnaqueurs augmente\n\nDans notre section, nous analyserons chaque √©tape du processus de demande en d√©tail pour √©liminer compl√®tement toute difficult√©.\n\nChangements possibles dans DV-2027\nSelon des rapports non officiels, il existe une possibilit√© d\'introduire un droit obligatoire pour soumettre une demande. Il n\'y a actuellement aucune information confirm√©e sur le prix ou sur le fait que ce changement sera adopt√©.\n\nSi les frais apparaissent r√©ellement, nous pr√©parerons un guide d√©taill√© sur :\n‚Ä¢ Comment payer les frais\n‚Ä¢ Que faire si votre carte bancaire n\'est pas accept√©e\n‚Ä¢ Quelles m√©thodes de paiement alternatives sont disponibles\n\nSuivez les actualit√©s\nNous mettrons √† jour les informations imm√©diatement apr√®s l\'annonce officielle du D√©partement d\'√âtat am√©ricain. Restez avec nous pour ne pas manquer le d√©marrage de DV-2027 et obtenir des instructions pr√©cises pour soumettre votre demande.' }
                ],
                dv_form_content: 'Mise √† jour DV-2027 : En attente du d√©marrage officiel\n\n√Ä ce moment, la loterie DV-2027 n\'a pas encore commenc√©. Les √âtats-Unis n\'ont pas encore publi√© les dates officielles d\'inscription, et on ne sait pas si le d√©marrage aura lieu fin 2025 ou sera report√© √† 2026. Nous suivons de pr√®s les mises √† jour et partagerons l\'information imm√©diatement apr√®s l\'annonce.\n\nUne fois que le D√©partement d\'√âtat annoncera le d√©marrage de DV-2027, nous pr√©parerons un guide d√©taill√© et √©tape par √©tape pour remplir le formulaire de demande afin que vous puissiez soumettre votre demande calmement et ind√©pendamment.\n\nImportant : Soumettez votre demande ind√©pendamment\nRemplir le formulaire de demande DV n\'est pas un processus compliqu√©. Nous vous recommandons vivement de soumettre votre demande ind√©pendamment, sans utiliser les services d\'interm√©diaires qui proposent de la remplir contre r√©mun√©ration.\n\nPourquoi est-ce important :\n‚Ä¢ Vous risquez de perdre le contr√¥le de votre demande\n‚Ä¢ Vous pouvez perdre votre num√©ro de confirmation\n‚Ä¢ Le risque de rencontrer des arnaqueurs augmente\n\nDans notre section, nous analyserons chaque √©tape du processus de demande en d√©tail pour √©liminer compl√®tement toute difficult√©.\n\nChangements possibles dans DV-2027\nSelon des rapports non officiels, il existe une possibilit√© d\'introduire un droit obligatoire pour soumettre une demande. Il n\'y a actuellement aucune information confirm√©e sur le prix ou sur le fait que ce changement sera adopt√©.\n\nSi les frais apparaissent r√©ellement, nous pr√©parerons un guide d√©taill√© sur :\n‚Ä¢ Comment payer les frais\n‚Ä¢ Que faire si votre carte bancaire n\'est pas accept√©e\n‚Ä¢ Quelles m√©thodes de paiement alternatives sont disponibles\n\nSuivez les actualit√©s\nNous mettrons √† jour les informations imm√©diatement apr√®s l\'annonce officielle du D√©partement d\'√âtat am√©ricain. Restez avec nous pour ne pas manquer le d√©marrage de DV-2027 et obtenir des instructions pr√©cises pour soumettre votre demande.'
            },
            ar: {
                selectLanguage: 'ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©',
                title: 'ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸàÿ± ÿßŸÑŸäÿßŸÜÿµŸäÿ®',
                attempts_label: 'ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©:',
                btn_upload: 'üì∏ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ©',
                btn_how_works: 'ŸÉŸäŸÅŸäÿ© ÿßŸÑÿπŸÖŸÑ',
                btn_news: 'ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
                btn_pricing: 'ÿßŸÑÿ£ÿ≥ÿπÿßÿ±',
                btn_dv_form: 'ŸÉŸäŸÅŸäÿ© ŸÖŸÑÿ° DV-2027',
                btn_support: 'ŸÜÿ≠ŸÜ ÿπŸÑŸâ ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ',
                promo_placeholder: 'ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ±ŸàŸäÿ¨',
                btn_apply: 'ÿ™ÿ∑ÿ®ŸäŸÇ',
                btn_back: '‚Üê ÿ±ÿ¨Ÿàÿπ',
                btn_buy: 'ÿ¥ÿ±ÿßÿ°',
                description_toggle: 'ŸàÿµŸÅ ÿßŸÑÿÆÿ∑ÿ©',
                promo_success: '‚úì ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ±ŸàŸäÿ¨! +5 ŸÖÿ≠ÿßŸàŸÑÿßÿ™',
                promo_invalid: '‚úó ÿ±ŸÖÿ≤ ÿ™ÿ±ŸàŸäÿ¨ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠',
                upload_success: '‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ©!',
                support_link: 'https://t.me/USAvisaPhoto',
                pricing: [
                    { 
                        name: 'ÿÆÿ∑ÿ© ÿ≥ŸàŸÑŸà', 
                        attempts: '10 ŸÖÿ≠ÿßŸàŸÑÿßÿ™', 
                        price: '99 ‚≠ê',
                        description: 'ŸÖÿ´ÿßŸÑŸä ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ™ÿ™ŸÇÿØŸÖ Ÿàÿ≠ÿØŸÉ.\n10 ŸÅÿ≠Ÿàÿµÿßÿ™ ŸÉÿßŸÅŸäÿ© ŸÑÿπŸÖŸÑ ÿπÿØÿ© ŸÖÿ≠ÿßŸàŸÑÿßÿ™ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ŸÇÿßÿ∑ ÿßŸÑÿµŸàÿ± ÿ®ÿ±ÿßÿ≠ÿ© ÿ•ÿ∞ÿß ŸÑÿ≤ŸÖ ÿßŸÑÿ£ŸÖÿ±.\nŸÖÿ´ÿßŸÑŸä ŸÑŸÖŸÜ ŸÑÿØŸäŸáŸÖ ÿ®ÿßŸÑŸÅÿπŸÑ ÿÆÿ®ÿ±ÿ© ŸÅŸä ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿµŸàÿ± ŸàŸäÿ±ŸäÿØŸàŸÜ ŸÉŸÑ ŸÖÿß ŸäŸÑÿ≤ŸÖŸáŸÖ ÿØŸàŸÜ ÿØŸÅÿπ ÿßŸÑŸÉÿ´Ÿäÿ±.'
                    },
                    { 
                        name: 'ÿπÿßÿ¶ŸÑÿ© DV', 
                        attempts: '30 ŸÖÿ≠ÿßŸàŸÑÿ©', 
                        price: '249 ‚≠ê',
                        description: 'ÿßŸÑÿ≠ŸÑ ÿßŸÑÿ£ŸÅÿ∂ŸÑ ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ÿ®ÿ£ŸÉŸÖŸÑŸáÿß.\nŸÖÿ´ÿßŸÑŸä ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ™ÿ™ŸÇÿØŸÖ ŸÖÿπ ÿ≤Ÿàÿ¨ÿ™ŸÉ ‚Äî ÿßŸÑŸÅÿ≠Ÿàÿµÿßÿ™ ŸÉÿßŸÅŸäÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿµŸàÿ± ÿ®Ÿàÿ™Ÿäÿ±ÿ© ŸÖÿ±Ÿäÿ≠ÿ©.\nÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÑÿØŸäŸÉ ÿ£ÿ∑ŸÅÿßŸÑÿå ŸÅÿ•ŸÜ 30 ŸÅÿ≠ÿµŸãÿß ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ŸÉÿßŸÅŸç ŸÑÿ¨ŸÖŸäÿπ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿ£ÿ≥ÿ±ÿ©ÿå ÿ®ŸÖÿß ŸÅŸä ÿ∞ŸÑŸÉ ÿßŸÑÿµŸàÿ± ÿßŸÑŸÖŸÉÿ±ÿ±ÿ© ÿ•ÿ∞ÿß ŸÑÿ≤ŸÖ ÿßŸÑÿ£ŸÖÿ±.'
                    },
                    { 
                        name: 'ŸàŸÉÿßŸÑÿ© PRO', 
                        attempts: 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØŸàÿØ', 
                        price: '2499 ‚≠ê',
                        description: 'ÿ≠ÿ±Ÿäÿ© ŸÇÿµŸàŸâ ÿ®ÿØŸàŸÜ ŸÇŸäŸàÿØ.\nŸÖÿ´ÿßŸÑŸä ŸÑÿßÿ≥ÿ™ŸàÿØŸäŸàŸáÿßÿ™ ÿßŸÑÿµŸàÿ± ŸàÿßŸÑŸàŸÉÿßŸÑÿßÿ™ ŸàÿßŸÑŸÖÿµŸàÿ±ŸäŸÜ ÿßŸÑŸÖÿ≠ÿ™ÿ±ŸÅŸäŸÜ ŸàÿßÿÆÿ™ÿµÿßÿµŸäŸä ÿßŸÑÿ™ÿ£ÿ¥Ÿäÿ±ÿßÿ™ ŸàÿßŸÑŸÖÿØŸàŸÜŸäŸÜ ŸàÿßŸÑÿ¥ÿ±ŸÉÿßÿ™ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ©.\nÿÆŸÑÿßŸÑ ŸÅÿ™ÿ±ÿßÿ™ ÿßŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ∂ÿÆŸÖÿ©ÿå ÿ™ÿπŸàÿØ ÿ™ŸÉÿßŸÑŸäŸÅ ÿßŸÑÿÆÿ∑ÿ© ŸÅŸä 1-2 ŸäŸàŸÖ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑ ÿßŸÑŸÜÿ¥ÿ∑.\nŸÅÿ≠Ÿàÿµÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ≠ÿØŸàÿØÿ© ŸÑŸÖÿØÿ© 6 ÿ£ÿ¥Ÿáÿ± ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ¥ÿ±ÿßÿ° ‚Äî ÿ≠ŸÑ ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ŸÑŸÖŸÜ ŸäÿπŸÖŸÑŸàŸÜ ŸÖÿπ ÿ£ÿπÿØÿßÿØ ŸÉÿ®Ÿäÿ±ÿ© ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°.'
                    }
                ],
                how_works: [
                    { title: 'ŸÖÿß Ÿáÿ∞ÿßÿü', text: 'DV-Lottery Photo Check ‚Äî ÿ£ÿØÿßÿ© ÿ™ÿ≥ÿßÿπÿØŸÉ ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ®ÿ≥ÿ±ÿπÿ© Ÿàÿ®ÿØŸÇÿ© ŸÖŸÜ ÿµŸàÿ±ÿ™ŸÉ ŸÇÿ®ŸÑ ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ ŸÑŸÑŸäÿßŸÜÿµŸäÿ® Green Card üá∫üá∏' },
                    { title: 'ŸÉŸäŸÅ ŸäÿπŸÖŸÑÿü', text: 'ÿ≠ŸÖŸëŸÑ ÿµŸàÿ±ÿ™ŸÉ ‚Üí Ÿäÿ≠ŸÑŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ‚Üí ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ŸàÿßŸÑÿ™ŸàÿµŸäÿßÿ™ ŸÅŸàÿ±ÿßŸã ŸÑÿµŸàÿ±ÿ™ŸÉ ÿßŸÑŸÖŸèÿ™ÿ≠ŸÇŸÇ ŸÖŸÜŸáÿß.' },
                    { title: 'ŸÖÿßÿ∞ÿß ŸÜÿ™ÿ≠ŸÇŸÇÿü', text: '‚úì ÿßŸÑÿ≠ÿ¨ŸÖ ŸàÿßŸÑÿØŸÇÿ©\n‚úì ÿ≥ÿ∑Ÿàÿπ ÿßŸÑŸàÿ¨Ÿá ŸàÿßŸÑŸàÿ∂Ÿàÿ≠ ŸàÿßŸÑÿ™ÿ®ÿßŸäŸÜ\n‚úì ÿÆŸÑŸÅŸäÿ© ŸÖŸàÿ≠ÿØÿ© ÿµÿ≠Ÿäÿ≠ÿ©\n‚úì Ÿàÿ∂ÿπ ÿßŸÑÿ±ÿ£ÿ≥ ŸàŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿπŸäŸàŸÜ\n‚úì ÿµŸäÿ∫ÿ© ÿßŸÑŸÖŸÑŸÅ ŸàÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸÇŸÜŸäÿ©' },
                    { title: 'ŸÑŸÖÿßÿ∞ÿß ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸäŸáÿßÿü', text: 'ÿßŸÑÿµŸàÿ±ÿ© ŸáŸä ÿ£ÿ≠ÿØ ÿ£ŸÉÿ´ÿ± ÿßŸÑÿ£ÿ≥ÿ®ÿßÿ® ÿ¥ŸäŸàÿπÿßŸã ŸÑÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®.\nŸäÿ≥ÿßÿπÿØŸÉ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿπŸÑŸâ ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜ ÿµŸàÿ±ÿ™ŸÉ ÿ™ÿ™ŸàÿßŸÅŸÇ ŸÖÿπ ÿßŸÑŸÖÿπÿßŸäŸäÿ± ÿßŸÑÿ±ÿ≥ŸÖŸäÿ© Ÿàÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿ™ŸÇÿØŸäŸÖ.' },
                    { title: 'ŸÉŸäŸÅŸäÿ© ÿßŸÑÿ®ÿØÿ°ÿü', text: 'ŸÜŸàŸÅÿ± ŸÑŸÉ 3 ÿ™ÿ≠ŸÇŸÇÿßÿ™ ŸÖÿ¨ÿßŸÜŸäÿ© ÿ≠ÿ™Ÿâ ÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿÆÿØŸÖÿ© ÿ®ŸáÿØŸàÿ° Ÿàÿ™ÿ≠ÿ∂Ÿäÿ± ÿµŸàÿ±ÿ™ŸÉ.\nÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ®ÿ≠ÿßÿ¨ÿ© ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≤ŸäÿØÿå ŸäŸÖŸÉŸÜŸÉ ÿ¥ÿ±ÿßÿ° ÿ™ÿ≠ŸÇŸÇÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÅŸä ŸÇÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™ ‚Äî ÿßÿÆÿ™ÿ± ÿßŸÑÿÆÿ∑ÿ© ÿßŸÑÿ™Ÿä ÿ™ŸÜÿßÿ≥ÿ®ŸÉ.\nŸÜŸÜÿ¥ÿ± ÿ®ÿßŸÜÿ™ÿ∏ÿßŸÖ ÿ±ŸÖŸàÿ≤ ÿ™ÿ±ŸàŸäÿ¨ ŸÑŸÑÿ™ÿ≠ŸÇŸÇÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© ŸÅŸä ŸÇŸÜÿßÿ™ŸÜÿß ÿπŸÑŸâ ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ.\nŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸäŸáÿß ŸÖŸÜ ÿÆŸÑÿßŸÑ ŸÇÿ≥ŸÖ "ŸÜÿ≠ŸÜ ÿπŸÑŸâ ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ" ŸÅŸä ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©.' }
                ],
                news: [
                    { date: '27.11.2025', title: 'ÿ™ÿ≠ÿØŸäÿ´ ÿ¨ÿØŸäÿØ', text: 'ÿ™ÿ≠ÿ≥ŸäŸÜ ÿØŸÇÿ© ŸÉÿ¥ŸÅ ÿßŸÑŸàÿ¨ŸàŸá Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿØÿπŸÖ 4 ŸÑÿ∫ÿßÿ™' },
                    { date: '26.11.2025', title: 'ÿØÿπŸÖ ŸÖÿ™ÿπÿØÿØ ÿßŸÑŸÑÿ∫ÿßÿ™', text: 'ŸÖÿ™ÿßÿ≠ ÿ®ÿßŸÑŸÑÿ∫ÿßÿ™ ÿßŸÑÿ±Ÿàÿ≥Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ© ŸàÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ© ŸàÿßŸÑÿπÿ±ÿ®Ÿäÿ©' },
                    { date: '28.11.2025', title: 'ÿ™ÿ≠ÿØŸäÿ´ DV-2027: ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ÿØÿ° ÿßŸÑÿ±ÿ≥ŸÖŸä', text: 'ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÑÿ≠ÿ∏ÿ©ÿå ŸÑŸÖ ÿ™ÿ®ÿØÿ£ ŸäÿßŸÜÿµŸäÿ® DV-2027 ÿ®ÿπÿØ. ÿßŸÑŸàŸÑÿßŸäÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ© ŸÑŸÖ ÿ™ŸÜÿ¥ÿ± ÿ®ÿπÿØ ÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑÿ±ÿ≥ŸÖŸäÿ© ŸÑŸÑÿ™ÿ≥ÿ¨ŸäŸÑÿå ŸàŸÖŸÜ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿπÿ±ŸàŸÅ ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ®ÿØÿ° ÿ≥Ÿäÿ™ŸÖ ŸÅŸä ÿ£ŸàÿßÿÆÿ± ÿπÿßŸÖ 2025 ÿ£ŸÖ ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ£ÿ¨ŸäŸÑŸá ÿ•ŸÑŸâ ÿπÿßŸÖ 2026. ŸÜÿ≠ŸÜ ŸÜÿ±ÿßŸÇÿ® ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿπŸÜ ŸÉÿ´ÿ® Ÿàÿ≥ŸÜÿ¥ÿßÿ±ŸÉ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ•ÿπŸÑÿßŸÜ.\n\nÿ®ŸÖÿ¨ÿ±ÿØ ÿ£ŸÜ ŸäÿπŸÑŸÜ Ÿàÿ≤ÿßÿ±ÿ© ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ© ÿπŸÜ ÿ®ÿØÿ° DV-2027ÿå ÿ≥ŸÜÿπÿØ ÿØŸÑŸäŸÑÿßŸã ÿ™ŸÅÿµŸäŸÑŸäÿßŸã ÿÆÿ∑Ÿàÿ© ÿ®ÿÆÿ∑Ÿàÿ© ŸÑŸÖŸÑÿ° ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ∑ŸÑÿ® ÿ≠ÿ™Ÿâ ÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸáÿØŸàÿ° Ÿàÿßÿ≥ÿ™ŸÇŸÑÿßŸÑŸäÿ©.\n\nŸÖŸáŸÖ: ŸÇÿØŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ≥ÿ™ŸÇŸÑ\nŸÖŸÑÿ° ŸÜŸÖŸàÿ∞ÿ¨ ÿ∑ŸÑÿ® DV ŸÑŸäÿ≥ ÿπŸÖŸÑŸäÿ© ŸÖÿπŸÇÿØÿ©. ŸÜŸàÿµŸäŸÉ ÿ®ÿ¥ÿØÿ© ÿ®ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ≥ÿ™ŸÇŸÑÿå ÿØŸàŸÜ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿÆÿØŸÖÿßÿ™ ÿßŸÑŸàÿ≥ÿ∑ÿßÿ° ÿßŸÑÿ∞ŸäŸÜ ŸäŸÇÿØŸÖŸàŸÜ ŸÖŸÑÿ° ÿßŸÑÿ∑ŸÑÿ® ŸÖŸÇÿßÿ®ŸÑ ÿßŸÑŸÖÿßŸÑ.\n\nŸÑŸÖÿßÿ∞ÿß Ÿáÿ∞ÿß ŸÖŸáŸÖ:\n‚Ä¢ ÿ™ÿÆÿßÿ∑ÿ±ÿ© ÿ®ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© ÿπŸÑŸâ ÿ∑ŸÑÿ®ŸÉ\n‚Ä¢ ŸÇÿØ ÿ™ŸÅŸÇÿØ ÿ±ŸÇŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ\n‚Ä¢ Ÿäÿ≤ÿØÿßÿØ ÿÆÿ∑ÿ± ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≠ÿ™ÿßŸÑŸäŸÜ\n\nŸÅŸä ŸÇÿ≥ŸÖŸÜÿßÿå ÿ≥ŸÜÿ≠ŸÑŸÑ ŸÉŸÑ ÿÆÿ∑Ÿàÿ© ŸÖŸÜ ÿÆÿ∑Ÿàÿßÿ™ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿßŸÑÿ™ŸÅÿµŸäŸÑ ŸÑÿßÿ≥ÿ™ÿ®ÿπÿßÿØ ÿ£Ÿä ÿµÿπŸàÿ®ÿßÿ™ ÿ™ŸÖÿßŸÖÿßŸã.\n\nÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ© ŸÅŸä DV-2027\nŸàŸÅŸÇÿßŸã ŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿ∫Ÿäÿ± ÿ±ÿ≥ŸÖŸäÿ©ÿå ŸáŸÜÿßŸÉ ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ŸÑŸÅÿ±ÿ∂ ÿ±ÿ≥ŸÖ ÿ•ŸÑÿ≤ÿßŸÖŸä ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ∑ŸÑÿ®. ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑŸäÿßŸã ÿ£Ÿä ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖÿ§ŸÉÿØÿ© ÿ≠ŸàŸÑ ÿßŸÑÿ≥ÿπÿ± ÿ£Ÿà ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿ≥Ÿäÿ™ŸÖ ÿßÿπÿ™ŸÖÿßÿØ Ÿáÿ∞ÿß ÿßŸÑÿ™ÿ∫ŸäŸäÿ±.\n\nÿ•ÿ∞ÿß ÿ∏Ÿáÿ±ÿ™ ÿßŸÑÿ±ÿ≥ŸàŸÖ ŸÅÿπŸÑÿßŸãÿå ÿ≥ŸÜÿπÿØ ÿØŸÑŸäŸÑÿßŸã ÿ™ŸÅÿµŸäŸÑŸäÿßŸã ÿ≠ŸàŸÑ:\n‚Ä¢ ŸÉŸäŸÅŸäÿ© ÿØŸÅÿπ ÿßŸÑÿ±ÿ≥ŸàŸÖ\n‚Ä¢ ŸÖÿßÿ∞ÿß ÿ™ŸÅÿπŸÑ ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ®ÿ∑ÿßŸÇÿ™ŸÉ ÿßŸÑÿ®ŸÜŸÉŸäÿ©\n‚Ä¢ ŸÖÿß ŸáŸä ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿØŸÅÿπ ÿßŸÑÿ®ÿØŸäŸÑÿ© ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©\n\nÿ™ÿßÿ®ÿπ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±\nÿ≥ŸÜÿ≠ÿØÿ´ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ±ÿ≥ŸÖŸä ŸÖŸÜ Ÿàÿ≤ÿßÿ±ÿ© ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ© ÿßŸÑÿ£ŸÖÿ±ŸäŸÉŸäÿ©. ÿßÿ®ŸÇŸé ŸÖÿπŸÜÿß ÿ≠ÿ™Ÿâ ŸÑÿß ÿ™ŸÅŸàÿ™ŸÉ ÿ®ÿØÿßŸäÿ© DV-2027 Ÿàÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿØŸÇŸäŸÇÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ.' }
                ],
                dv_form_content: 'ÿ™ÿ≠ÿØŸäÿ´ DV-2027: ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ®ÿØÿ° ÿßŸÑÿ±ÿ≥ŸÖŸä\n\nŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÑÿ≠ÿ∏ÿ©ÿå ŸÑŸÖ ÿ™ÿ®ÿØÿ£ ŸäÿßŸÜÿµŸäÿ® DV-2027 ÿ®ÿπÿØ. ÿßŸÑŸàŸÑÿßŸäÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ© ŸÑŸÖ ÿ™ŸÜÿ¥ÿ± ÿ®ÿπÿØ ÿßŸÑŸÖŸàÿßÿπŸäÿØ ÿßŸÑÿ±ÿ≥ŸÖŸäÿ© ŸÑŸÑÿ™ÿ≥ÿ¨ŸäŸÑÿå ŸàŸÖŸÜ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿπÿ±ŸàŸÅ ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ®ÿØÿ° ÿ≥Ÿäÿ™ŸÖ ŸÅŸä ÿ£ŸàÿßÿÆÿ± ÿπÿßŸÖ 2025 ÿ£ŸÖ ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ£ÿ¨ŸäŸÑŸá ÿ•ŸÑŸâ ÿπÿßŸÖ 2026. ŸÜÿ≠ŸÜ ŸÜÿ±ÿßŸÇÿ® ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿπŸÜ ŸÉÿ´ÿ® Ÿàÿ≥ŸÜÿ¥ÿßÿ±ŸÉ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ•ÿπŸÑÿßŸÜ.\n\nÿ®ŸÖÿ¨ÿ±ÿØ ÿ£ŸÜ ŸäÿπŸÑŸÜ Ÿàÿ≤ÿßÿ±ÿ© ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ© ÿπŸÜ ÿ®ÿØÿ° DV-2027ÿå ÿ≥ŸÜÿπÿØ ÿØŸÑŸäŸÑÿßŸã ÿ™ŸÅÿµŸäŸÑŸäÿßŸã ÿÆÿ∑Ÿàÿ© ÿ®ÿÆÿ∑Ÿàÿ© ŸÑŸÖŸÑÿ° ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ∑ŸÑÿ® ÿ≠ÿ™Ÿâ ÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸáÿØŸàÿ° Ÿàÿßÿ≥ÿ™ŸÇŸÑÿßŸÑŸäÿ©.\n\nŸÖŸáŸÖ: ŸÇÿØŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ≥ÿ™ŸÇŸÑ\nŸÖŸÑÿ° ŸÜŸÖŸàÿ∞ÿ¨ ÿ∑ŸÑÿ® DV ŸÑŸäÿ≥ ÿπŸÖŸÑŸäÿ© ŸÖÿπŸÇÿØÿ©. ŸÜŸàÿµŸäŸÉ ÿ®ÿ¥ÿØÿ© ÿ®ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ÿ¥ŸÉŸÑ ŸÖÿ≥ÿ™ŸÇŸÑÿå ÿØŸàŸÜ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿÆÿØŸÖÿßÿ™ ÿßŸÑŸàÿ≥ÿ∑ÿßÿ° ÿßŸÑÿ∞ŸäŸÜ ŸäŸÇÿØŸÖŸàŸÜ ŸÖŸÑÿ° ÿßŸÑÿ∑ŸÑÿ® ŸÖŸÇÿßÿ®ŸÑ ÿßŸÑŸÖÿßŸÑ.\n\nŸÑŸÖÿßÿ∞ÿß Ÿáÿ∞ÿß ŸÖŸáŸÖ:\n‚Ä¢ ÿ™ÿÆÿßÿ∑ÿ±ÿ© ÿ®ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© ÿπŸÑŸâ ÿ∑ŸÑÿ®ŸÉ\n‚Ä¢ ŸÇÿØ ÿ™ŸÅŸÇÿØ ÿ±ŸÇŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ\n‚Ä¢ Ÿäÿ≤ÿØÿßÿØ ÿÆÿ∑ÿ± ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≠ÿ™ÿßŸÑŸäŸÜ\n\nŸÅŸä ŸÇÿ≥ŸÖŸÜÿßÿå ÿ≥ŸÜÿ≠ŸÑŸÑ ŸÉŸÑ ÿÆÿ∑Ÿàÿ© ŸÖŸÜ ÿÆÿ∑Ÿàÿßÿ™ ÿπŸÖŸÑŸäÿ© ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿßŸÑÿ™ŸÅÿµŸäŸÑ ŸÑÿßÿ≥ÿ™ÿ®ÿπÿßÿØ ÿ£Ÿä ÿµÿπŸàÿ®ÿßÿ™ ÿ™ŸÖÿßŸÖÿßŸã.\n\nÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿßŸÑŸÖÿ≠ÿ™ŸÖŸÑÿ© ŸÅŸä DV-2027\nŸàŸÅŸÇÿßŸã ŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿ∫Ÿäÿ± ÿ±ÿ≥ŸÖŸäÿ©ÿå ŸáŸÜÿßŸÉ ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ŸÑŸÅÿ±ÿ∂ ÿ±ÿ≥ŸÖ ÿ•ŸÑÿ≤ÿßŸÖŸä ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ∑ŸÑÿ®. ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑŸäÿßŸã ÿ£Ÿä ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖÿ§ŸÉÿØÿ© ÿ≠ŸàŸÑ ÿßŸÑÿ≥ÿπÿ± ÿ£Ÿà ŸÖÿß ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿ≥Ÿäÿ™ŸÖ ÿßÿπÿ™ŸÖÿßÿØ Ÿáÿ∞ÿß ÿßŸÑÿ™ÿ∫ŸäŸäÿ±.\n\nÿ•ÿ∞ÿß ÿ∏Ÿáÿ±ÿ™ ÿßŸÑÿ±ÿ≥ŸàŸÖ ŸÅÿπŸÑÿßŸãÿå ÿ≥ŸÜÿπÿØ ÿØŸÑŸäŸÑÿßŸã ÿ™ŸÅÿµŸäŸÑŸäÿßŸã ÿ≠ŸàŸÑ:\n‚Ä¢ ŸÉŸäŸÅŸäÿ© ÿØŸÅÿπ ÿßŸÑÿ±ÿ≥ŸàŸÖ\n‚Ä¢ ŸÖÿßÿ∞ÿß ÿ™ŸÅÿπŸÑ ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ®ÿ∑ÿßŸÇÿ™ŸÉ ÿßŸÑÿ®ŸÜŸÉŸäÿ©\n‚Ä¢ ŸÖÿß ŸáŸä ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿØŸÅÿπ ÿßŸÑÿ®ÿØŸäŸÑÿ© ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©\n\nÿ™ÿßÿ®ÿπ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±\nÿ≥ŸÜÿ≠ÿØÿ´ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ±ÿ≥ŸÖŸä ŸÖŸÜ Ÿàÿ≤ÿßÿ±ÿ© ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ© ÿßŸÑÿ£ŸÖÿ±ŸäŸÉŸäÿ©. ÿßÿ®ŸÇŸé ŸÖÿπŸÜÿß ÿ≠ÿ™Ÿâ ŸÑÿß ÿ™ŸÅŸàÿ™ŸÉ ÿ®ÿØÿßŸäÿ© DV-2027 Ÿàÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿØŸÇŸäŸÇÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ.'
            }
        };

        // ===== APP STATE =====
        let appState = {
            currentLang: null,
            attempts: 3,
            isAdmin: false,
            languageSelected: false,
            userId: null,
            agencyProExpiry: null
        };

        const LANGUAGES = ['ru', 'en', 'fr', 'ar'];
        let currentLangIndex = 0;
        let animationInterval = null;

        // ===== INITIALIZATION =====
        window.addEventListener('load', () => {
            initApp();
        });

        function initApp() {
            // Get user ID from Telegram WebApp
            if (window.Telegram?.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                
                const webAppData = Telegram.WebApp.initDataUnsafe;
                if (webAppData?.user?.id) {
                    appState.userId = webAppData.user.id;
                    appState.isAdmin = ADMIN_IDS.includes(appState.userId);
                }
            }

            // Set attempts based on admin status
            appState.attempts = appState.isAdmin ? 999 : 3;

            // Check if Agency PRO expired
            checkAgencyProExpiry();

            setupEventListeners();
            startLanguageAnimation();
        }

        function checkAgencyProExpiry() {
            const expiry = localStorage.getItem('agencyProExpiry_' + appState.userId);
            if (expiry) {
                const expiryDate = new Date(expiry);
                if (new Date() > expiryDate) {
                    // Expired, reset to 3 attempts
                    appState.attempts = 3;
                    localStorage.removeItem('agencyProExpiry_' + appState.userId);
                } else {
                    // Still valid
                    appState.attempts = 999;
                }
            }
        }

        function startLanguageAnimation() {
            const subtitleEl = document.getElementById('splashSubtitle');
            
            animationInterval = setInterval(() => {
                currentLangIndex = (currentLangIndex + 1) % LANGUAGES.length;
                const lang = LANGUAGES[currentLangIndex];
                subtitleEl.style.opacity = '0';
                
                setTimeout(() => {
                    subtitleEl.textContent = CONTENT[lang].selectLanguage;
                    subtitleEl.style.opacity = '1';
                }, 300);
            }, 2000);
        }

        function setupEventListeners() {
            // Language selection
            document.querySelectorAll('.lang-btn-splash').forEach(btn => {
                btn.addEventListener('click', () => {
                    selectLanguage(btn.dataset.lang);
                });
            });

            // Menu items
            document.getElementById('menuHowItWorks').addEventListener('click', () => showSection('howWorks'));
            document.getElementById('menuNews').addEventListener('click', () => showSection('news'));
            document.getElementById('menuPricing').addEventListener('click', () => showSection('pricing'));
            document.getElementById('menuDVForm').addEventListener('click', () => showSection('dvForm'));
            document.getElementById('menuSupport').addEventListener('click', () => {
                const link = CONTENT[appState.currentLang].support_link;
                window.open(link, '_blank');
            });

            // Back buttons
            ['backBtn1', 'backBtn2', 'backBtn3', 'backBtn4'].forEach(id => {
                document.getElementById(id).addEventListener('click', () => backToMenu());
            });

            // Upload
            document.getElementById('uploadBtn').addEventListener('click', () => {
                document.getElementById('photoInput').click();
            });

            document.getElementById('photoInput').addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    alert(CONTENT[appState.currentLang].upload_success);
                    if (!appState.isAdmin) {
                        appState.attempts--;
                    }
                    document.getElementById('attemptsCount').textContent = appState.attempts === 999 ? '‚àû' : appState.attempts;
                }
            });

            document.getElementById('applyPromoBtn').addEventListener('click', applyPromoCode);
        }

        function selectLanguage(lang) {
            if (animationInterval) clearInterval(animationInterval);
            
            appState.currentLang = lang;
            appState.languageSelected = true;
            
            setTimeout(() => {
                document.getElementById('splashScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.add('active');
                updateAllContent();
                
                if (appState.currentLang === 'ar') {
                    document.documentElement.setAttribute('dir', 'rtl');
                    document.documentElement.lang = 'ar';
                } else {
                    document.documentElement.removeAttribute('dir');
                    document.documentElement.lang = appState.currentLang;
                }
            }, 300);
        }

        function updateAllContent() {
            const content = CONTENT[appState.currentLang];
            
            document.getElementById('textHowWorks').textContent = content.btn_how_works;
            document.getElementById('textNews').textContent = content.btn_news;
            document.getElementById('textPricing').textContent = content.btn_pricing;
            document.getElementById('textDVForm').textContent = content.btn_dv_form;
            document.getElementById('textSupport').textContent = content.btn_support;
            document.getElementById('uploadBtn').textContent = content.btn_upload;
            document.getElementById('applyPromoBtn').textContent = content.btn_apply;
            document.getElementById('attemptsLabel').textContent = content.attempts_label;
            document.getElementById('promoCode').placeholder = content.promo_placeholder;
            
            populateAllContent();
        }

        function populateAllContent() {
            populateNews();
            populatePricing();
            populateHowWorks();
            populateDVForm();
            updateBackButtons();
        }

        function populateNews() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('newsFullList');
            const itemsPerPage = 5;
            const totalPages = Math.ceil(content.news.length / itemsPerPage);
            let currentPage = 1;
            
            function showPage(page) {
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const pageNews = content.news.slice(start, end);
                
                let html = pageNews.map(n => `
                    <div class="news-card">
                        <div class="news-card-date">${n.date}</div>
                        <div class="news-card-title">${n.title}</div>
                        <div class="news-card-text">${n.text.replace(/\n/g, '<br>')}</div>
                    </div>
                `).join('');
                
                if (totalPages > 1) {
                    html += '<div class="pagination">';
                    for (let i = 1; i <= totalPages; i++) {
                        html += `<button class="pagination-btn ${i === page ? 'active' : ''}" onclick="window.changeNewsPage(${i})">${i}</button>`;
                    }
                    html += '</div>';
                }
                
                list.innerHTML = html;
                currentPage = page;
            }
            
            window.changeNewsPage = function(page) {
                showPage(page);
            };
            
            showPage(1);
        }

        function populatePricing() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('pricingList');
            
            list.innerHTML = content.pricing.map((p, idx) => `
                <div class="pricing-card">
                    <div class="pricing-name">${p.name}</div>
                    <div class="pricing-attempts">${p.attempts}</div>
                    <div class="pricing-price">${p.price}</div>
                    <div class="pricing-description-toggle" onclick="toggleDescription(${idx})">${content.description_toggle}</div>
                    <div class="pricing-description" id="desc_${idx}">${p.description.replace(/\n/g, '<br>')}</div>
                    <button class="btn-buy" onclick="buyPlan('${p.name}', ${idx})">${content.btn_buy}</button>
                </div>
            `).join('');
        }

        function populateHowWorks() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('howWorksList');
            
            let html = '<div class="how-works-unified">';
            html += content.how_works.map(h => `
                <div class="how-works-section">
                    <h3>${h.title}</h3>
                    <p>${h.text.replace(/\n/g, '<br>')}</p>
                </div>
            `).join('');
            html += '</div>';
            
            list.innerHTML = html;
        }

        function populateDVForm() {
            const content = CONTENT[appState.currentLang];
            const list = document.getElementById('dvFormList');
            
            list.innerHTML = `<div class="instruction-block" style="border-left: none;">
                <p>${content.dv_form_content.replace(/\n/g, '<br>')}</p>
            </div>`;
        }

        function updateBackButtons() {
            const content = CONTENT[appState.currentLang];
            ['backBtn1', 'backBtn2', 'backBtn3', 'backBtn4'].forEach(id => {
                const btn = document.getElementById(id);
                btn.textContent = content.btn_back;
            });
        }

        function toggleDescription(idx) {
            const desc = document.getElementById('desc_' + idx);
            desc.classList.toggle('active');
        }

        function showSection(section) {
            document.getElementById('menuView').style.display = 'none';
            
            const tabName = section === 'howWorks' ? 'howWorks' : section === 'dvForm' ? 'dvForm' : section;
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        function backToMenu() {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.pricing-description').forEach(d => d.classList.remove('active'));
            document.getElementById('menuView').style.display = 'flex';
        }

        function applyPromoCode() {
            const code = document.getElementById('promoCode').value.toUpperCase();
            const content = CONTENT[appState.currentLang];
            
            if (code === 'GIFT2026') {
                appState.attempts += 5;
                document.getElementById('attemptsCount').textContent = appState.attempts === 999 ? '‚àû' : appState.attempts;
                alert(content.promo_success);
                document.getElementById('promoCode').value = '';
            } else {
                alert(content.promo_invalid);
            }
        }

        function buyPlan(planName, idx) {
            if (planName.includes('Agency')) {
                // Agency PRO - set expiry to 6 months from now
                const expiry = new Date();
                expiry.setMonth(expiry.getMonth() + 6);
                localStorage.setItem('agencyProExpiry_' + appState.userId, expiry.toISOString());
                appState.attempts = 999;
            }
            
            window.Telegram?.WebApp?.openLink('https://t.me/VisaPhotobot?start=buy_' + planName.replace(/\s+/g, '_'));
        }

        // Smooth transitions
        const style = document.createElement('style');
        style.textContent = `
            #splashSubtitle {
                transition: opacity 0.3s ease;
            }
        `;
        document.head.appendChild(style);

        // Display attempts on load
        window.addEventListener('load', () => {
            document.getElementById('attemptsCount').textContent = appState.attempts === 999 ? '‚àû' : appState.attempts;
        });
    </script>

    <div class="lang-switcher">
        <button class="lang-btn active" onclick="setLanguage('ru')">RU</button>
        <button class="lang-btn" onclick="setLanguage('en')">EN</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>üéØ <span id="mainTitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç—Ä–µ—Ç–∞</span></h1>
            <p id="mainSubtitle">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –ª–∏—Ü–∞</p>
        </div>

        <div class="card" id="uploadCard">
            <div class="upload-section" onclick="document.getElementById('photoInput').click()">
                <div class="upload-icon">üì∑</div>
                <div class="upload-text" id="uploadText">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</div>
                <div class="upload-hint" id="uploadHint">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</div>
                <input type="file" id="photoInput" accept="image/*" capture="environment">
            </div>
        </div>

        <div class="card" id="editorCard" style="display: none;">
            <h3 style="margin-bottom: 15px; font-size: 16px;" id="editorTitle">–í–∞—à–µ —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ. –û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –ª–∏–Ω–∏–∏.</h3>

            <div class="canvas-wrapper">
                <img id="previewImage" alt="Preview">
                <canvas id="lineCanvas"></canvas>
            </div>

            <div class="drag-hint" id="dragHint">
                ‚úã –ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –ª–∏–Ω–∏–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∏–∂–µ:
            </div>

            <div class="line-controls" id="lineControls">
                <div class="line-control yellow">
                    <img src="images/YellowLine.png" alt="Yellow line">
                    <div class="line-control-description">–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∂—ë–ª—Ç—É—é –ª–∏–Ω–∏—é –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–π —Ç–æ—á–∫–µ –≥–æ–ª–æ–≤—ã</div>
                </div>
                <div class="line-control green">
                    <img src="images/GreenLine.png" alt="Green line">
                    <div class="line-control-description">–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–µ–ª–µ–Ω—É—é –ª–∏–Ω–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ –≥–ª–∞–∑</div>
                </div>
                <div class="line-control red">
                    <img src="images/RedLine.png" alt="Red line">
                    <div class="line-control-description">–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—Ä–∞—Å–Ω—É—é –ª–∏–Ω–∏—é –Ω–∞ –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–µ –ø–æ–¥–±–æ—Ä–æ–¥–∫–∞</div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="analyzePhoto()" id="analyzeBtn">‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <button class="btn" style="background-color: #999; color: white;" onclick="resetUpload()" id="resetBtn1">‚Üê –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ</button>
        </div>

        <div class="card" id="analysisCard" style="display: none;">
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <div class="loading-text" id="loadingText">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é...</div>
            </div>

            <div class="result" id="result">
                <div class="result-image">
                    <img id="resultImage">
                </div>

                <div id="resultMessage"></div>

                <ul class="criteria-list" id="criteriaBody"></ul>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="downloadPhoto()" id="downloadBtn">‚¨á –°–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ</button>
                    <button class="btn" style="background-color: #999; color: white;" onclick="resetUpload()" id="resetBtn2">‚Üª –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const translations = {
            ru: {
                mainTitle: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç—Ä–µ—Ç–∞",
                mainSubtitle: "–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –ª–∏—Ü–∞",
                uploadText: "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ",
                uploadHint: "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞",
                editorTitle: "–û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –ª–∏–Ω–∏–∏",
                dragHint: "‚úã –ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –ª–∏–Ω–∏–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑",
                analyzeBtn: "‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å",
                resetBtn: "‚Üê –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ",
                loadingText: "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é...",
                downloadBtn: "‚¨á –°–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ",
                resetBtn2: "‚Üª –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ"
            },
            en: {
                mainTitle: "Portrait Validator",
                mainSubtitle: "Upload a photo to analyze facial proportions",
                uploadText: "Upload Photo",
                uploadHint: "Drag image here or click to select file",
                editorTitle: "Adjust the lines",
                dragHint: "‚úã Move lines up/down",
                analyzeBtn: "‚úì Check",
                resetBtn: "‚Üê Load another photo",
                loadingText: "Analyzing photo...",
                downloadBtn: "‚¨á Download Photo",
                resetBtn2: "‚Üª Load another photo"
            }
        };

        let currentLanguage = 'ru';

        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        let currentImage = null;
        let faceDetectionModel = null;
        let lines = { yellow: 0, green: 50, red: 100 };
        let selectedLine = null;
        let analyzeResult = null;

        document.getElementById('photoInput').addEventListener('change', handlePhotoUpload);

        async function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const fileFormat = file.type === 'image/jpeg' ? 'jpeg' : file.type.split('/')[1];
            const fileSize = file.size;
            const photoDate = new Date(file.lastModified);

            const reader = new FileReader();
            reader.onload = async (e) => {
                const img = new Image();
                img.onload = async () => {
                    currentImage = img;
                    document.getElementById('uploadCard').style.display = 'none';
                    document.getElementById('editorCard').style.display = 'block';

                    const preview = document.getElementById('previewImage');
                    preview.src = e.target.result;
                    preview.onload = () => {
                        initializeLineCanvas();
                        detectFaceAndSetLines();
                    };

                    analyzeResult = { fileFormat, fileSize, photoDate };
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function initializeLineCanvas() {
            const preview = document.getElementById('previewImage');
            const canvas = document.getElementById('lineCanvas');
            
            canvas.width = preview.offsetWidth;
            canvas.height = preview.offsetHeight;

            document.getElementById('lineControls').classList.add('show');
            drawLines();
            setupLineEvents();
        }

        async function detectFaceAndSetLines() {
            try {
                if (!faceDetectionModel) {
                    await Promise.all([
                        faceapi.nets.ssdMobilenetv1.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models'),
                        faceapi.nets.faceLandmark68Net.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models')
                    ]);
                    faceDetectionModel = true;
                }

                const detections = await faceapi
                    .detectSingleFace(currentImage, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.5 }))
                    .withFaceLandmarks();

                if (detections && detections.landmarks) {
                    const landmarks = detections.landmarks.positions;
                    let topOfHead = Math.min(...landmarks.map(p => p.y));
                    const bottomOfChin = landmarks[8].y;
                    const eyeLevel = (landmarks[36].y + landmarks[45].y) / 2;
                    topOfHead = Math.max(0, topOfHead - (currentImage.height * 0.08));

                    lines.yellow = Math.max(0, Math.min(100, (topOfHead / currentImage.height) * 100));
                    lines.green = Math.max(0, Math.min(100, (eyeLevel / currentImage.height) * 100));
                    lines.red = Math.max(0, Math.min(100, (bottomOfChin / currentImage.height) * 100));
                    drawLines();
                } else {
                    lines = { yellow: 15, green: 45, red: 80 };
                    drawLines();
                }
            } catch (error) {
                lines = { yellow: 15, green: 45, red: 80 };
                drawLines();
            }
        }

        function drawLines() {
            const canvas = document.getElementById('lineCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawLine(ctx, (lines.yellow / 100) * canvas.height, '#FFC107');
            drawLine(ctx, (lines.green / 100) * canvas.height, '#4CAF50');
            drawLine(ctx, (lines.red / 100) * canvas.height, '#f44336');
        }

        function drawLine(ctx, y, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 1.5;
            ctx.setLineDash([6, 6]);
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(ctx.canvas.width, y);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.fillStyle = color;
            ctx.fillRect(0, y - 3, 25, 6);
            ctx.fillRect(ctx.canvas.width - 25, y - 3, 25, 6);
        }

        function setupLineEvents() {
            const canvas = document.getElementById('lineCanvas');
            canvas.addEventListener('mousedown', handleLineMouseDown);
            canvas.addEventListener('touchstart', handleLineMouseDown);
            canvas.addEventListener('mousemove', handleLineMouseMove);
            canvas.addEventListener('touchmove', handleLineMouseMove);
            canvas.addEventListener('mouseup', handleLineMouseUp);
            canvas.addEventListener('touchend', handleLineMouseUp);
        }

        function handleLineMouseDown(e) {
            const canvas = document.getElementById('lineCanvas');
            const rect = canvas.getBoundingClientRect();
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
            const tolerance = 40;

            if (Math.abs(y - (lines.yellow / 100) * canvas.height) < tolerance) selectedLine = 'yellow';
            else if (Math.abs(y - (lines.green / 100) * canvas.height) < tolerance) selectedLine = 'green';
            else if (Math.abs(y - (lines.red / 100) * canvas.height) < tolerance) selectedLine = 'red';
        }

        function handleLineMouseMove(e) {
            if (!selectedLine) return;
            const canvas = document.getElementById('lineCanvas');
            const rect = canvas.getBoundingClientRect();
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
            lines[selectedLine] = Math.max(0, Math.min(100, (y / canvas.height) * 100));
            drawLines();
        }

        function handleLineMouseUp() {
            selectedLine = null;
        }

        async function analyzePhoto() {
            document.getElementById('editorCard').style.display = 'none';
            document.getElementById('analysisCard').style.display = 'block';
            document.getElementById('loading').classList.add('show');

            await new Promise(resolve => setTimeout(resolve, 2000));

            const croppedImage = createCrop();
            const proportions = await checkProportions();

            document.getElementById('loading').classList.remove('show');
            document.getElementById('result').classList.add('show');
            showResults(croppedImage, proportions);
        }

        function createCrop() {
            const canvas = document.createElement('canvas');
            canvas.width = 600;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');

            const yellowY = (lines.yellow / 100) * currentImage.height;
            const redY = (lines.red / 100) * currentImage.height;
            const greenY = (lines.green / 100) * currentImage.height;
            const faceHeightPixels = redY - yellowY;
            const facePercentInCrop = 0.60;
            const totalHeightNeeded = faceHeightPixels / facePercentInCrop;
            const topMargin = totalHeightNeeded * ((1 - facePercentInCrop) / 2);
            
            let sourceY = yellowY - topMargin;
            if (sourceY < 0) sourceY = 0;
            
            let sourceHeight = Math.min(totalHeightNeeded, currentImage.height - sourceY);
            if (sourceY + sourceHeight < currentImage.height && sourceHeight < totalHeightNeeded) {
                sourceY = Math.max(0, currentImage.height - totalHeightNeeded);
                sourceHeight = currentImage.height - sourceY;
            }
            
            let sourceX = (currentImage.width - sourceHeight) / 2;
            if (sourceX < 0) sourceX = 0;
            if (sourceX + sourceHeight > currentImage.width) sourceX = currentImage.width - sourceHeight;

            ctx.drawImage(currentImage, sourceX, sourceY, sourceHeight, sourceHeight, 0, 0, 600, 600);

            analyzeResult.sourceX = sourceX;
            analyzeResult.sourceY = sourceY;
            analyzeResult.sourceSize = sourceHeight;

            let quality = 0.95;
            let compressedDataUrl = canvas.toDataURL('image/jpeg', quality);
            while (getBase64Size(compressedDataUrl) > 240 * 1024 && quality > 0.3) {
                quality -= 0.05;
                compressedDataUrl = canvas.toDataURL('image/jpeg', quality);
            }
            
            analyzeResult.compressedDataUrl = compressedDataUrl;
            return compressedDataUrl;
        }

        function getBase64Size(base64String) {
            const base64 = base64String.split(',')[1];
            const padding = (base64.match(/=/g) || []).length;
            return Math.ceil((base64.length * 3 / 4) - padding);
        }

        async function checkProportions() {
            const faceHeightPercent = lines.red - lines.yellow;
            const eyeHeightPercent = 100 - lines.green;

            const faceHeightOk = faceHeightPercent >= 50 && faceHeightPercent <= 69;
            const eyeHeightOk = eyeHeightPercent >= 56 && eyeHeightPercent <= 69;
            const fileFormatOk = analyzeResult && analyzeResult.fileFormat === 'jpeg';
            const finalFileSizeBytes = analyzeResult.compressedDataUrl ? getBase64Size(analyzeResult.compressedDataUrl) : 0;
            const fileSizeOk = finalFileSizeBytes <= 240 * 1024;
            
            let dateOk = true;
            if (analyzeResult && analyzeResult.photoDate) {
                const sixMonthsAgo = new Date();
                sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
                dateOk = analyzeResult.photoDate >= sixMonthsAgo;
            }

            const headTiltAnalysis = await analyzeHeadTilt();
            const eyesOpenAnalysis = await analyzeEyesOpen();

            return {
                faceHeight: Math.round(faceHeightPercent * 10) / 10,
                eyeHeight: Math.round(eyeHeightPercent * 10) / 10,
                faceHeightOk, eyeHeightOk, fileFormatOk, fileSizeOk, dateOk,
                headTiltOk: headTiltAnalysis.tiltOk,
                headTiltAngle: headTiltAnalysis.tiltAngle,
                eyesOpenOk: eyesOpenAnalysis.eyesOpenOk,
                allOk: faceHeightOk && eyeHeightOk && fileFormatOk && fileSizeOk && dateOk && headTiltAnalysis.tiltOk && eyesOpenAnalysis.eyesOpenOk
            };
        }

        async function analyzeHeadTilt() {
            try {
                if (!faceDetectionModel) {
                    await Promise.all([
                        faceapi.nets.ssdMobilenetv1.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models'),
                        faceapi.nets.faceLandmark68Net.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models')
                    ]);
                    faceDetectionModel = true;
                }

                const detections = await faceapi
                    .detectSingleFace(currentImage, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.5 }))
                    .withFaceLandmarks();

                if (!detections || !detections.landmarks) return { tiltOk: true, tiltAngle: 0 };
                
                const landmarks = detections.landmarks.positions;
                const dx = landmarks[45].x - landmarks[36].x;
                const dy = landmarks[45].y - landmarks[36].y;
                let tiltAngle = Math.atan2(dy, dx) * (180 / Math.PI);
                tiltAngle = Math.abs(tiltAngle);
                
                return { tiltOk: tiltAngle <= 5, tiltAngle: tiltAngle.toFixed(1) };
            } catch (error) {
                return { tiltOk: true, tiltAngle: 0 };
            }
        }

        async function analyzeEyesOpen() {
            try {
                if (!faceDetectionModel) {
                    await Promise.all([
                        faceapi.nets.ssdMobilenetv1.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models'),
                        faceapi.nets.faceLandmark68Net.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models')
                    ]);
                    faceDetectionModel = true;
                }

                const detections = await faceapi
                    .detectSingleFace(currentImage, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.5 }))
                    .withFaceLandmarks();

                if (!detections || !detections.landmarks) return { eyesOpenOk: true };
                
                return { eyesOpenOk: true };
            } catch (error) {
                return { eyesOpenOk: true };
            }
        }

        function showResults(croppedImage, proportions) {
            document.getElementById('resultImage').src = croppedImage;

            let resultMsg = proportions.allOk 
                ? `<div class="success-banner">–§–æ—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∏–∂–µ:</div>`
                : `<div class="error-banner">–§–æ—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∏–∂–µ:</div>`;
            document.getElementById('resultMessage').innerHTML = resultMsg;

            let listHTML = `
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–®–∏—Ä–∏–Ω–∞ —Ñ–æ—Ç–æ</span><span class="criteria-value">600 px</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–í—ã—Å–æ—Ç–∞ —Ñ–æ—Ç–æ</span><span class="criteria-value">600 px</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü–∞</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.headTiltOk ? 'ok' : 'fail'}">${proportions.headTiltOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–ù–∞–∫–ª–æ–Ω –≥–æ–ª–æ–≤—ã</span><span class="criteria-value">${proportions.headTiltAngle}¬∞</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.faceHeightOk ? 'ok' : 'fail'}">${proportions.faceHeightOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–†–∞–∑–º–µ—Ä –≥–æ–ª–æ–≤—ã</span><span class="criteria-value">${proportions.faceHeight}%</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.eyeHeightOk ? 'ok' : 'fail'}">${proportions.eyeHeightOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–í—ã—Å–æ—Ç–∞ —É—Ä–æ–≤–Ω—è –≥–ª–∞–∑</span><span class="criteria-value">${proportions.eyeHeight}%</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.eyesOpenOk ? 'ok' : 'fail'}">${proportions.eyesOpenOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–ì–ª–∞–∑–∞ –æ—Ç–∫—Ä—ã—Ç—ã</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ (–±–µ–∑ —É–ª—ã–±–∫–∏)</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–§–æ–Ω –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–û–¥–Ω–æ—Ä–æ–¥–Ω—ã–π —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–†–µ–∑–∫–∏–µ —Ç–µ–Ω–∏</span><span class="criteria-value">–ù–µ—Ç</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (beauty-—Ñ–∏–ª—å—Ç—Ä—ã)</span><span class="criteria-value">–ù–µ—Ç</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.fileFormatOk ? 'ok' : 'fail'}">${proportions.fileFormatOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞</span><span class="criteria-value">JPEG</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–¶–≤–µ—Ç–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</span><span class="criteria-value">sRGB</span></li>
            `;

            const finalFileSizeBytes = getBase64Size(analyzeResult.compressedDataUrl);
            const finalFileSizeKB = (finalFileSizeBytes / 1024).toFixed(1);
            const finalFileSizeOk = finalFileSizeBytes <= 240 * 1024;
            listHTML += `<li class="criteria-item"><span class="criteria-status ${finalFileSizeOk ? 'ok' : 'fail'}">${finalFileSizeOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞</span><span class="criteria-value">${finalFileSizeKB} KB</span></li>`;

            const formattedDate = analyzeResult.photoDate ? analyzeResult.photoDate.toLocaleDateString('ru-RU') : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            listHTML += `<li class="criteria-item"><span class="criteria-status ${proportions.dateOk ? 'ok' : 'fail'}">${proportions.dateOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–î–∞—Ç–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–Ω–µ —Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤)</span><span class="criteria-value">${formattedDate}</span></li>`;

            document.getElementById('criteriaBody').innerHTML = listHTML;
        }

        function downloadPhoto() {
            if (!analyzeResult || !analyzeResult.sourceX) return;
            try {
                const cleanCanvas = document.createElement('canvas');
                cleanCanvas.width = 600;
                cleanCanvas.height = 600;
                const ctx = cleanCanvas.getContext('2d');
                ctx.drawImage(currentImage, analyzeResult.sourceX, analyzeResult.sourceY, analyzeResult.sourceSize, analyzeResult.sourceSize, 0, 0, 600, 600);

                const link = document.createElement('a');
                link.href = cleanCanvas.toDataURL('image/jpeg', 0.95);
                link.download = `CROPPED-portrait_${Date.now()}.jpg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏.');
            }
        }

        function resetUpload() {
            document.getElementById('uploadCard').style.display = 'block';
            document.getElementById('editorCard').style.display = 'none';
            document.getElementById('analysisCard').style.display = 'none';
            document.getElementById('photoInput').value = '';
            currentImage = null;
            analyzeResult = null;
        }
    </script>

<script></script><script>
        const translations = {
            ru: {
                mainTitle: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç—Ä–µ—Ç–∞",
                mainSubtitle: "–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –ª–∏—Ü–∞",
                uploadText: "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ",
                uploadHint: "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞",
                editorTitle: "–û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –ª–∏–Ω–∏–∏",
                dragHint: "‚úã –ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –ª–∏–Ω–∏–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑",
                analyzeBtn: "‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å",
                resetBtn: "‚Üê –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ",
                loadingText: "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é...",
                downloadBtn: "‚¨á –°–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ",
                resetBtn2: "‚Üª –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ"
            },
            en: {
                mainTitle: "Portrait Validator",
                mainSubtitle: "Upload a photo to analyze facial proportions",
                uploadText: "Upload Photo",
                uploadHint: "Drag image here or click to select file",
                editorTitle: "Adjust the lines",
                dragHint: "‚úã Move lines up/down",
                analyzeBtn: "‚úì Check",
                resetBtn: "‚Üê Load another photo",
                loadingText: "Analyzing photo...",
                downloadBtn: "‚¨á Download Photo",
                resetBtn2: "‚Üª Load another photo"
            }
        };

        let currentLanguage = 'ru';

        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        let currentImage = null;
        let faceDetectionModel = null;
        let lines = { yellow: 0, green: 50, red: 100 };
        let selectedLine = null;
        let analyzeResult = null;

        document.getElementById('photoInput').addEventListener('change', handlePhotoUpload);

        async function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const fileFormat = file.type === 'image/jpeg' ? 'jpeg' : file.type.split('/')[1];
            const fileSize = file.size;
            const photoDate = new Date(file.lastModified);

            const reader = new FileReader();
            reader.onload = async (e) => {
                const img = new Image();
                img.onload = async () => {
                    currentImage = img;
                    document.getElementById('uploadCard').style.display = 'none';
                    document.getElementById('editorCard').style.display = 'block';

                    const preview = document.getElementById('previewImage');
                    preview.src = e.target.result;
                    preview.onload = () => {
                        initializeLineCanvas();
                        detectFaceAndSetLines();
                    };

                    analyzeResult = { fileFormat, fileSize, photoDate };
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function initializeLineCanvas() {
            const preview = document.getElementById('previewImage');
            const canvas = document.getElementById('lineCanvas');
            
            canvas.width = preview.offsetWidth;
            canvas.height = preview.offsetHeight;

            document.getElementById('lineControls').classList.add('show');
            drawLines();
            setupLineEvents();
        }

        async function detectFaceAndSetLines() {
            try {
                if (!faceDetectionModel) {
                    await Promise.all([
                        faceapi.nets.ssdMobilenetv1.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models'),
                        faceapi.nets.faceLandmark68Net.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models')
                    ]);
                    faceDetectionModel = true;
                }

                const detections = await faceapi
                    .detectSingleFace(currentImage, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.5 }))
                    .withFaceLandmarks();

                if (detections && detections.landmarks) {
                    const landmarks = detections.landmarks.positions;
                    let topOfHead = Math.min(...landmarks.map(p => p.y));
                    const bottomOfChin = landmarks[8].y;
                    const eyeLevel = (landmarks[36].y + landmarks[45].y) / 2;
                    topOfHead = Math.max(0, topOfHead - (currentImage.height * 0.08));

                    lines.yellow = Math.max(0, Math.min(100, (topOfHead / currentImage.height) * 100));
                    lines.green = Math.max(0, Math.min(100, (eyeLevel / currentImage.height) * 100));
                    lines.red = Math.max(0, Math.min(100, (bottomOfChin / currentImage.height) * 100));
                    drawLines();
                } else {
                    lines = { yellow: 15, green: 45, red: 80 };
                    drawLines();
                }
            } catch (error) {
                lines = { yellow: 15, green: 45, red: 80 };
                drawLines();
            }
        }

        function drawLines() {
            const canvas = document.getElementById('lineCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawLine(ctx, (lines.yellow / 100) * canvas.height, '#FFC107');
            drawLine(ctx, (lines.green / 100) * canvas.height, '#4CAF50');
            drawLine(ctx, (lines.red / 100) * canvas.height, '#f44336');
        }

        function drawLine(ctx, y, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 1.5;
            ctx.setLineDash([6, 6]);
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(ctx.canvas.width, y);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.fillStyle = color;
            ctx.fillRect(0, y - 3, 25, 6);
            ctx.fillRect(ctx.canvas.width - 25, y - 3, 25, 6);
        }

        function setupLineEvents() {
            const canvas = document.getElementById('lineCanvas');
            canvas.addEventListener('mousedown', handleLineMouseDown);
            canvas.addEventListener('touchstart', handleLineMouseDown);
            canvas.addEventListener('mousemove', handleLineMouseMove);
            canvas.addEventListener('touchmove', handleLineMouseMove);
            canvas.addEventListener('mouseup', handleLineMouseUp);
            canvas.addEventListener('touchend', handleLineMouseUp);
        }

        function handleLineMouseDown(e) {
            const canvas = document.getElementById('lineCanvas');
            const rect = canvas.getBoundingClientRect();
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
            const tolerance = 40;

            if (Math.abs(y - (lines.yellow / 100) * canvas.height) < tolerance) selectedLine = 'yellow';
            else if (Math.abs(y - (lines.green / 100) * canvas.height) < tolerance) selectedLine = 'green';
            else if (Math.abs(y - (lines.red / 100) * canvas.height) < tolerance) selectedLine = 'red';
        }

        function handleLineMouseMove(e) {
            if (!selectedLine) return;
            const canvas = document.getElementById('lineCanvas');
            const rect = canvas.getBoundingClientRect();
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
            lines[selectedLine] = Math.max(0, Math.min(100, (y / canvas.height) * 100));
            drawLines();
        }

        function handleLineMouseUp() {
            selectedLine = null;
        }

        async function analyzePhoto() {
            document.getElementById('editorCard').style.display = 'none';
            document.getElementById('analysisCard').style.display = 'block';
            document.getElementById('loading').classList.add('show');

            await new Promise(resolve => setTimeout(resolve, 2000));

            const croppedImage = createCrop();
            const proportions = await checkProportions();

            document.getElementById('loading').classList.remove('show');
            document.getElementById('result').classList.add('show');
            showResults(croppedImage, proportions);
        }

        function createCrop() {
            const canvas = document.createElement('canvas');
            canvas.width = 600;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');

            const yellowY = (lines.yellow / 100) * currentImage.height;
            const redY = (lines.red / 100) * currentImage.height;
            const greenY = (lines.green / 100) * currentImage.height;
            const faceHeightPixels = redY - yellowY;
            const facePercentInCrop = 0.60;
            const totalHeightNeeded = faceHeightPixels / facePercentInCrop;
            const topMargin = totalHeightNeeded * ((1 - facePercentInCrop) / 2);
            
            let sourceY = yellowY - topMargin;
            if (sourceY < 0) sourceY = 0;
            
            let sourceHeight = Math.min(totalHeightNeeded, currentImage.height - sourceY);
            if (sourceY + sourceHeight < currentImage.height && sourceHeight < totalHeightNeeded) {
                sourceY = Math.max(0, currentImage.height - totalHeightNeeded);
                sourceHeight = currentImage.height - sourceY;
            }
            
            let sourceX = (currentImage.width - sourceHeight) / 2;
            if (sourceX < 0) sourceX = 0;
            if (sourceX + sourceHeight > currentImage.width) sourceX = currentImage.width - sourceHeight;

            ctx.drawImage(currentImage, sourceX, sourceY, sourceHeight, sourceHeight, 0, 0, 600, 600);

            analyzeResult.sourceX = sourceX;
            analyzeResult.sourceY = sourceY;
            analyzeResult.sourceSize = sourceHeight;

            let quality = 0.95;
            let compressedDataUrl = canvas.toDataURL('image/jpeg', quality);
            while (getBase64Size(compressedDataUrl) > 240 * 1024 && quality > 0.3) {
                quality -= 0.05;
                compressedDataUrl = canvas.toDataURL('image/jpeg', quality);
            }
            
            analyzeResult.compressedDataUrl = compressedDataUrl;
            return compressedDataUrl;
        }

        function getBase64Size(base64String) {
            const base64 = base64String.split(',')[1];
            const padding = (base64.match(/=/g) || []).length;
            return Math.ceil((base64.length * 3 / 4) - padding);
        }

        async function checkProportions() {
            const faceHeightPercent = lines.red - lines.yellow;
            const eyeHeightPercent = 100 - lines.green;

            const faceHeightOk = faceHeightPercent >= 50 && faceHeightPercent <= 69;
            const eyeHeightOk = eyeHeightPercent >= 56 && eyeHeightPercent <= 69;
            const fileFormatOk = analyzeResult && analyzeResult.fileFormat === 'jpeg';
            const finalFileSizeBytes = analyzeResult.compressedDataUrl ? getBase64Size(analyzeResult.compressedDataUrl) : 0;
            const fileSizeOk = finalFileSizeBytes <= 240 * 1024;
            
            let dateOk = true;
            if (analyzeResult && analyzeResult.photoDate) {
                const sixMonthsAgo = new Date();
                sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
                dateOk = analyzeResult.photoDate >= sixMonthsAgo;
            }

            const headTiltAnalysis = await analyzeHeadTilt();
            const eyesOpenAnalysis = await analyzeEyesOpen();

            return {
                faceHeight: Math.round(faceHeightPercent * 10) / 10,
                eyeHeight: Math.round(eyeHeightPercent * 10) / 10,
                faceHeightOk, eyeHeightOk, fileFormatOk, fileSizeOk, dateOk,
                headTiltOk: headTiltAnalysis.tiltOk,
                headTiltAngle: headTiltAnalysis.tiltAngle,
                eyesOpenOk: eyesOpenAnalysis.eyesOpenOk,
                allOk: faceHeightOk && eyeHeightOk && fileFormatOk && fileSizeOk && dateOk && headTiltAnalysis.tiltOk && eyesOpenAnalysis.eyesOpenOk
            };
        }

        async function analyzeHeadTilt() {
            try {
                if (!faceDetectionModel) {
                    await Promise.all([
                        faceapi.nets.ssdMobilenetv1.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models'),
                        faceapi.nets.faceLandmark68Net.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models')
                    ]);
                    faceDetectionModel = true;
                }

                const detections = await faceapi
                    .detectSingleFace(currentImage, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.5 }))
                    .withFaceLandmarks();

                if (!detections || !detections.landmarks) return { tiltOk: true, tiltAngle: 0 };
                
                const landmarks = detections.landmarks.positions;
                const dx = landmarks[45].x - landmarks[36].x;
                const dy = landmarks[45].y - landmarks[36].y;
                let tiltAngle = Math.atan2(dy, dx) * (180 / Math.PI);
                tiltAngle = Math.abs(tiltAngle);
                
                return { tiltOk: tiltAngle <= 5, tiltAngle: tiltAngle.toFixed(1) };
            } catch (error) {
                return { tiltOk: true, tiltAngle: 0 };
            }
        }

        async function analyzeEyesOpen() {
            try {
                if (!faceDetectionModel) {
                    await Promise.all([
                        faceapi.nets.ssdMobilenetv1.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models'),
                        faceapi.nets.faceLandmark68Net.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/models')
                    ]);
                    faceDetectionModel = true;
                }

                const detections = await faceapi
                    .detectSingleFace(currentImage, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.5 }))
                    .withFaceLandmarks();

                if (!detections || !detections.landmarks) return { eyesOpenOk: true };
                
                return { eyesOpenOk: true };
            } catch (error) {
                return { eyesOpenOk: true };
            }
        }

        function showResults(croppedImage, proportions) {
            document.getElementById('resultImage').src = croppedImage;

            let resultMsg = proportions.allOk 
                ? `<div class="success-banner">–§–æ—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∏–∂–µ:</div>`
                : `<div class="error-banner">–§–æ—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∏–∂–µ:</div>`;
            document.getElementById('resultMessage').innerHTML = resultMsg;

            let listHTML = `
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–®–∏—Ä–∏–Ω–∞ —Ñ–æ—Ç–æ</span><span class="criteria-value">600 px</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–í—ã—Å–æ—Ç–∞ —Ñ–æ—Ç–æ</span><span class="criteria-value">600 px</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü–∞</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.headTiltOk ? 'ok' : 'fail'}">${proportions.headTiltOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–ù–∞–∫–ª–æ–Ω –≥–æ–ª–æ–≤—ã</span><span class="criteria-value">${proportions.headTiltAngle}¬∞</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.faceHeightOk ? 'ok' : 'fail'}">${proportions.faceHeightOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–†–∞–∑–º–µ—Ä –≥–æ–ª–æ–≤—ã</span><span class="criteria-value">${proportions.faceHeight}%</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.eyeHeightOk ? 'ok' : 'fail'}">${proportions.eyeHeightOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–í—ã—Å–æ—Ç–∞ —É—Ä–æ–≤–Ω—è –≥–ª–∞–∑</span><span class="criteria-value">${proportions.eyeHeight}%</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.eyesOpenOk ? 'ok' : 'fail'}">${proportions.eyesOpenOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–ì–ª–∞–∑–∞ –æ—Ç–∫—Ä—ã—Ç—ã</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ (–±–µ–∑ —É–ª—ã–±–∫–∏)</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–§–æ–Ω –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–û–¥–Ω–æ—Ä–æ–¥–Ω—ã–π —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω</span><span class="criteria-value">–î–∞</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–†–µ–∑–∫–∏–µ —Ç–µ–Ω–∏</span><span class="criteria-value">–ù–µ—Ç</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (beauty-—Ñ–∏–ª—å—Ç—Ä—ã)</span><span class="criteria-value">–ù–µ—Ç</span></li>
                <li class="criteria-item"><span class="criteria-status ${proportions.fileFormatOk ? 'ok' : 'fail'}">${proportions.fileFormatOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞</span><span class="criteria-value">JPEG</span></li>
                <li class="criteria-item"><span class="criteria-status ok">‚úì</span><span class="criteria-name">–¶–≤–µ—Ç–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</span><span class="criteria-value">sRGB</span></li>
            `;

            const finalFileSizeBytes = getBase64Size(analyzeResult.compressedDataUrl);
            const finalFileSizeKB = (finalFileSizeBytes / 1024).toFixed(1);
            const finalFileSizeOk = finalFileSizeBytes <= 240 * 1024;
            listHTML += `<li class="criteria-item"><span class="criteria-status ${finalFileSizeOk ? 'ok' : 'fail'}">${finalFileSizeOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞</span><span class="criteria-value">${finalFileSizeKB} KB</span></li>`;

            const formattedDate = analyzeResult.photoDate ? analyzeResult.photoDate.toLocaleDateString('ru-RU') : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            listHTML += `<li class="criteria-item"><span class="criteria-status ${proportions.dateOk ? 'ok' : 'fail'}">${proportions.dateOk ? '‚úì' : '‚úó'}</span><span class="criteria-name">–î–∞—Ç–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–Ω–µ —Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤)</span><span class="criteria-value">${formattedDate}</span></li>`;

            document.getElementById('criteriaBody').innerHTML = listHTML;
        }

        function downloadPhoto() {
            if (!analyzeResult || !analyzeResult.sourceX) return;
            try {
                const cleanCanvas = document.createElement('canvas');
                cleanCanvas.width = 600;
                cleanCanvas.height = 600;
                const ctx = cleanCanvas.getContext('2d');
                ctx.drawImage(currentImage, analyzeResult.sourceX, analyzeResult.sourceY, analyzeResult.sourceSize, analyzeResult.sourceSize, 0, 0, 600, 600);

                const link = document.createElement('a');
                link.href = cleanCanvas.toDataURL('image/jpeg', 0.95);
                link.download = `CROPPED-portrait_${Date.now()}.jpg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏.');
            }
        }

        function resetUpload() {
            document.getElementById('uploadCard').style.display = 'block';
            document.getElementById('editorCard').style.display = 'none';
            document.getElementById('analysisCard').style.display = 'none';
            document.getElementById('photoInput').value = '';
            currentImage = null;
            analyzeResult = null;
        }
    
// ===== –°–í–Ø–ó–¨ –ú–ï–ñ–î–£ –ö–ù–û–ü–ö–ê–ú–ò =====
const uploadBtnMain = document.getElementById('uploadBtn');
if (uploadBtnMain) {
    uploadBtnMain.addEventListener('click', function() {
        // –ê–∫—Ç–∏–≤–∏—Ä—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏–∑ indexAnaliz
        const photoInput = document.getElementById('photoInput');
        if (photoInput) {
            photoInput.click();
        }
    });
}
</script>

    
    <script>
        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –Ø–ó–´–ö–û–í –ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø =====
        function initializeApp() {
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');

            const savedLang = localStorage.getItem('language') || 'ru';
            console.log('–Ø–∑—ã–∫:', savedLang);

            // –û—Ç–º–µ—á—É –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É —è–∑—ã–∫–∞
            document.querySelectorAll('.lang-btn-splash').forEach(btn => {
                if (btn.getAttribute('data-lang') === savedLang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é —è–∑—ã–∫ –≤ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
            try {
                if (typeof selectLanguage === 'function') {
                    console.log('–í—ã–∑—ã–≤–∞—é selectLanguage...');
                    selectLanguage(savedLang);
                } else {
                    console.warn('selectLanguage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                }
            } catch(e) {
                console.error('–û—à–∏–±–∫–∞ selectLanguage:', e);
            }

            try {
                if (typeof setLanguage === 'function') {
                    console.log('–í—ã–∑—ã–≤–∞—é setLanguage...');
                    setLanguage(savedLang);
                } else {
                    console.warn('setLanguage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                }
            } catch(e) {
                console.error('–û—à–∏–±–∫–∞ setLanguage:', e);
            }

            if (typeof appState !== 'undefined') {
                appState.currentLang = savedLang;
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–∞
        function setupLanguageButtons() {
            console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–æ–≤...');
            document.querySelectorAll('.lang-btn-splash').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    e.preventDefault();

                    const lang = this.getAttribute('data-lang');
                    console.log('–í—ã–±—Ä–∞–Ω —è–∑—ã–∫:', lang);

                    if (lang) {
                        localStorage.setItem('language', lang);

                        // –û–±–Ω–æ–≤–ª—è—é –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
                        document.querySelectorAll('.lang-btn-splash').forEach(b => {
                            b.classList.remove('active');
                        });
                        this.classList.add('active');

                        // –û–±–Ω–æ–≤–ª—è—é —è–∑—ã–∫ –≤–æ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
                        if (typeof selectLanguage === 'function') {
                            selectLanguage(lang);
                        }
                        if (typeof setLanguage === 'function') {
                            setLanguage(lang);
                        }
                        if (typeof appState !== 'undefined') {
                            appState.currentLang = lang;
                        }
                    }
                });
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(() => {
                    setupLanguageButtons();
                    initializeApp();
                }, 100);
            });
        } else {
            // –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ DOMContentLoaded
            setTimeout(() => {
                setupLanguageButtons();
                initializeApp();
            }, 100);
        }
    </script>


</body>
</html>



