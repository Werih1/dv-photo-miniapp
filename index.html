<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>DV Photo Check</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #333;
            overflow: hidden;
        }

        /* ===== SPLASH SCREEN ===== */
        .splash {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .splash.hidden {
            display: none;
        }

        .splash-content {
            text-align: center;
        }

        .splash-logo {
            width: 180px;
            height: 180px;
            margin-bottom: 30px;
            object-fit: contain;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.15));
        }

        .splash-title {
            font-size: 28px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .splash-subtitle {
            font-size: 15px;
            color: rgba(255,255,255,0.9);
        }

        /* ===== LANGUAGE SELECTOR ===== */
        .lang-selector {
            position: fixed;
            top: 16px;
            right: 16px;
            display: flex;
            gap: 8px;
            z-index: 999;
            background: rgba(255,255,255,0.95);
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .lang-btn {
            width: 40px;
            height: 40px;
            border: 2px solid transparent;
            border-radius: 8px;
            background: none;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
            padding: 4px;
        }

        .lang-btn.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        /* ===== MAIN APP ===== */
        .app {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            overflow: hidden;
        }

        .app.active {
            display: flex;
        }

        /* ===== TABS ===== */
        .tabs {
            display: flex;
            gap: 0;
            width: 100%;
            border-bottom: 1px solid #e0e0e0;
            background: white;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: white;
            color: #999;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            text-transform: uppercase;
        }

        .tab.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }

        /* ===== TAB CONTENT ===== */
        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        /* ===== HOME TAB ===== */
        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .attempts-badge {
            display: inline-block;
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .news-section {
            margin-top: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #667eea;
        }

        .news-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #667eea;
            font-size: 14px;
        }

        .news-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 13px;
            line-height: 1.5;
            border-left: 3px solid #667eea;
        }

        .news-date {
            font-size: 11px;
            color: #999;
            margin-top: 6px;
        }

        /* ===== UPLOAD SECTION ===== */
        .upload-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .button {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            appearance: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:active {
            background: #e0e0e0;
        }

        /* ===== PHOTO EDITOR ===== */
        .photo-editor {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            gap: 12px;
        }

        .photo-editor.active {
            display: flex;
        }

        .canvas-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            background: #f5f5f5;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* ===== PRICING ===== */
        .pricing-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .promo-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .promo-input-group input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }

        .promo-input-group button {
            padding: 12px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .pricing-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .pricing-card:active {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .pricing-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .pricing-attempts {
            font-size: 13px;
            color: #667eea;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .pricing-price {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
        }

        /* ===== INSTRUCTIONS ===== */
        .instructions {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .instruction-block {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #667eea;
        }

        .instruction-block h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .instruction-block ol,
        .instruction-block ul {
            margin-left: 16px;
            font-size: 13px;
            line-height: 1.8;
            color: #555;
        }

        .instruction-block li {
            margin-bottom: 6px;
        }
    </style>
</head>
<body>
    <!-- SPLASH SCREEN -->
    <div class="splash" id="splashScreen">
        <div class="splash-content">
            <img src="images/dv-lottery-logo.jpg" alt="DV Lottery" class="splash-logo">
            <div class="splash-title">DV Photo Validator</div>
            <div class="splash-subtitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –¥–ª—è –ª–æ—Ç–µ—Ä–µ–∏</div>
        </div>
    </div>

    <!-- LANGUAGE SELECTOR -->
    <div class="lang-selector">
        <button class="lang-btn active" data-lang="ru" title="–†—É—Å—Å–∫–∏–π">üá∑üá∫</button>
        <button class="lang-btn" data-lang="en" title="English">üá¨üáß</button>
        <button class="lang-btn" data-lang="fr" title="Fran√ßais">üá´üá∑</button>
        <button class="lang-btn" data-lang="ar" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">üá∏üá¶</button>
    </div>

    <!-- MAIN APP -->
    <div class="app" id="mainApp">
        <!-- TABS -->
        <div class="tabs">
            <button class="tab active" data-tab="home">–ì–õ–ê–í–ù–ê–Ø</button>
            <button class="tab" data-tab="pricing">–¢–ê–†–ò–§–´</button>
            <button class="tab" data-tab="instructions">–ò–ù–°–¢–†–£–ö–¶–ò–ò</button>
        </div>

        <!-- HOME TAB -->
        <div class="tab-content active" id="homeTab">
            <div class="header">
                <h1>DV Photo Check</h1>
                <div class="attempts-badge">–ü–æ–ø—ã—Ç–æ–∫: <span id="attemptsCount">3</span></div>
            </div>

            <div class="news-section">
                <div class="news-title">üì∞ –ù–û–í–û–°–¢–ò</div>
                <div id="newsList"></div>
            </div>

            <div class="upload-section">
                <button class="button btn-primary" id="uploadBtn">üì∏ –ó–ê–ì–†–£–ó–ò–¢–¨ –§–û–¢–û</button>
                <button class="button btn-secondary" id="instructionsBtn">üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò</button>
            </div>

            <input type="file" id="photoInput" accept="image/*" style="display: none;">
        </div>

        <!-- PRICING TAB -->
        <div class="tab-content" id="pricingTab">
            <div class="promo-input-group">
                <input type="text" id="promoCode" placeholder="GIFT2026">
                <button id="applyPromoBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>

            <div class="pricing-section" id="pricingList"></div>
        </div>

        <!-- INSTRUCTIONS TAB -->
        <div class="tab-content" id="instructionsTab">
            <div class="instructions" id="instructionsList"></div>
        </div>
    </div>

    <script>
        // ===== LANGUAGE SYSTEM =====
        const LANGUAGES = {
            ru: {
                title: 'DV Photo Validator',
                subtitle: '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –¥–ª—è –ª–æ—Ç–µ—Ä–µ–∏',
                attempts_label: '–ü–æ–ø—ã—Ç–æ–∫:',
                btn_upload: 'üì∏ –ó–ê–ì–†–£–ó–ò–¢–¨ –§–û–¢–û',
                btn_instructions: 'üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò',
                news_label: 'üì∞ –ù–û–í–û–°–¢–ò',
                promo_placeholder: 'GIFT2026',
                btn_apply: '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',
                tab_home: '–ì–õ–ê–í–ù–ê–Ø',
                tab_pricing: '–¢–ê–†–ò–§–´',
                tab_instructions: '–ò–ù–°–¢–†–£–ö–¶–ò–ò',
            },
            en: {
                title: 'DV Photo Validator',
                subtitle: 'Photo validation for lottery',
                attempts_label: 'Attempts:',
                btn_upload: 'üì∏ UPLOAD PHOTO',
                btn_instructions: 'üìã INSTRUCTIONS',
                news_label: 'üì∞ NEWS',
                promo_placeholder: 'GIFT2026',
                btn_apply: 'Apply',
                tab_home: 'HOME',
                tab_pricing: 'PRICING',
                tab_instructions: 'INSTRUCTIONS',
            },
            fr: {
                title: 'Validateur Photo DV',
                subtitle: 'Validation photo pour loterie',
                attempts_label: 'Tentatives:',
                btn_upload: 'üì∏ T√âL√âCHARGER',
                btn_instructions: 'üìã INSTRUCTIONS',
                news_label: 'üì∞ NOUVELLES',
                promo_placeholder: 'GIFT2026',
                btn_apply: 'Appliquer',
                tab_home: 'ACCUEIL',
                tab_pricing: 'TARIFS',
                tab_instructions: 'INSTRUCTIONS',
            },
            ar: {
                title: 'ŸÖÿØŸÇŸÇ ÿµŸàÿ± ÿßŸÑÿ¨ŸÜÿ≥Ÿäÿ©',
                subtitle: 'ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿµŸàÿ± ŸÑŸÑÿ±ÿ≥ŸÖ',
                attempts_label: 'ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:',
                btn_upload: 'üì∏ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ©',
                btn_instructions: 'üìã ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™',
                news_label: 'üì∞ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
                promo_placeholder: 'GIFT2026',
                btn_apply: 'ÿ™ÿ∑ÿ®ŸäŸÇ',
                tab_home: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
                tab_pricing: 'ÿßŸÑÿ£ÿ≥ÿπÿßÿ±',
                tab_instructions: 'ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™',
            }
        };

        // ===== APP STATE =====
        let appState = {
            currentLang: 'ru',
            attempts: 3,
            isAdmin: false,
        };

        // ===== INITIALIZATION =====
        window.addEventListener('load', async () => {
            await initApp();
        });

        async function initApp() {
            console.log('Initializing app...');
            
            if (window.Telegram?.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }

            setupEventListeners();
            await hideSplashScreen();
            setLanguage('ru');
            populateContent();
        }

        async function hideSplashScreen() {
            return new Promise(resolve => {
                setTimeout(() => {
                    document.getElementById('splashScreen').classList.add('hidden');
                    document.getElementById('mainApp').classList.add('active');
                    resolve();
                }, 3000);
            });
        }

        function setupEventListeners() {
            // Language selection
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    setLanguage(btn.dataset.lang);
                });
            });

            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    switchTab(tab.dataset.tab);
                });
            });

            // Upload
            document.getElementById('uploadBtn').addEventListener('click', () => {
                document.getElementById('photoInput').click();
            });

            document.getElementById('photoInput').addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    alert('‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!\n\n–§—É–Ω–∫—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –≤—Å–∫–æ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞.');
                    appState.attempts--;
                    document.getElementById('attemptsCount').textContent = appState.attempts;
                }
            });

            document.getElementById('applyPromoBtn').addEventListener('click', applyPromoCode);
        }

        function setLanguage(lang) {
            appState.currentLang = lang;
            document.documentElement.setAttribute('data-lang', lang);
            updateUIText();
        }

        function updateUIText() {
            const lang = LANGUAGES[appState.currentLang];
            
            document.querySelector('.splash-title').textContent = lang.title;
            document.querySelector('.splash-subtitle').textContent = lang.subtitle;
            document.getElementById('uploadBtn').textContent = lang.btn_upload;
            document.getElementById('instructionsBtn').textContent = lang.btn_instructions;
            document.getElementById('promoCode').placeholder = lang.promo_placeholder;
            document.getElementById('applyPromoBtn').textContent = lang.btn_apply;
            
            document.querySelectorAll('.tab').forEach(tab => {
                const key = 'tab_' + tab.dataset.tab;
                if (lang[key]) tab.textContent = lang[key];
            });
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));

            document.getElementById(tabName + 'Tab').classList.add('active');
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        }

        function populateContent() {
            populateNews();
            populatePricing();
            populateInstructions();
        }

        function populateNews() {
            const news = [
                { text: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —É–ª—É—á—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü', date: '27.11.2025' },
                { text: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —è–∑—ã–∫–æ–≤: –†–£, EN, FR, AR', date: '26.11.2025' },
                { text: '–ü—Ä–æ–º–æ–∫–æ–¥ GIFT2026 –¥–ª—è +5 –ø–æ–ø—ã—Ç–æ–∫', date: '25.11.2025' }
            ];

            const list = document.getElementById('newsList');
            list.innerHTML = news.map(n => 
                `<div class="news-item">${n.text}<div class="news-date">${n.date}</div></div>`
            ).join('');
        }

        function populatePricing() {
            const plans = [
                { name: '–°–æ–ª–æ Plan', attempts: '10', price: '99 ‚≠ê' },
                { name: '–°–µ–º–µ–π–Ω—ã–π DV', attempts: '30', price: '249 ‚≠ê' },
                { name: 'Agency PRO', attempts: '‚àû', price: '2499 ‚≠ê' }
            ];

            const list = document.getElementById('pricingList');
            list.innerHTML = plans.map(p => `
                <div class="pricing-card">
                    <div class="pricing-name">${p.name}</div>
                    <div class="pricing-attempts">${p.attempts} –ø–æ–ø—ã—Ç–æ–∫</div>
                    <div class="pricing-price">${p.price}</div>
                </div>
            `).join('');
        }

        function populateInstructions() {
            const instructions = [
                {
                    title: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ç–æ',
                    content: `
                        <li>–†–∞–∑–º–µ—Ä: 600x600 –ø–∏–∫—Å–µ–ª–µ–π</li>
                        <li>–§–æ—Ä–º–∞—Ç: JPEG</li>
                        <li>–ú–∞–∫—Å–∏–º—É–º: 240 –ö–ë</li>
                        <li>–¶–≤–µ—Ç–æ–≤–∞—è –≥–ª—É–±–∏–Ω–∞: 24-–±–∏—Ç</li>
                    `
                },
                {
                    title: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é',
                    content: `
                        <li>–§–æ—Ç–æ –Ω–µ —Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤</li>
                        <li>–û–¥–Ω–æ—Ç–æ–Ω–Ω—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω</li>
                        <li>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞</li>
                        <li>–ì–ª–∞–∑–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç—ã</li>
                    `
                }
            ];

            const list = document.getElementById('instructionsList');
            list.innerHTML = instructions.map(i => `
                <div class="instruction-block">
                    <h3>${i.title}</h3>
                    <ol>${i.content}</ol>
                </div>
            `).join('');
        }

        function applyPromoCode() {
            const code = document.getElementById('promoCode').value.toUpperCase();
            if (code === 'GIFT2026') {
                appState.attempts += 5;
                document.getElementById('attemptsCount').textContent = appState.attempts;
                alert('‚úì –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! +5 –ø–æ–ø—ã—Ç–æ–∫');
                document.getElementById('promoCode').value = '';
            } else {
                alert('‚úó –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥');
            }
        }
    </script>
</body>
</html>



