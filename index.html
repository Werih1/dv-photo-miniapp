<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>DV Photo Check</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script async src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4"></script>
    <script async src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-api@0.0.7/dist/face-api.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #333;
            overflow: hidden;
            --lang: 'ru';
        }

        /* ===== LANGUAGE VARIABLES ===== */
        [data-lang="en"] { --lang: 'en'; }
        [data-lang="fr"] { --lang: 'fr'; }
        [data-lang="ar"] { --lang: 'ar'; }

        /* ===== SPLASH SCREEN ===== */
        .splash {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            animation: fadeInSplash 0.5s ease-in;
        }

        .splash.hidden {
            animation: fadeOutSplash 0.5s ease-out forwards;
            pointer-events: none;
        }

        @keyframes fadeInSplash {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOutSplash {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .splash-content {
            text-align: center;
            animation: slideUp 0.6s ease-out 0.3s both;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .splash-logo {
            width: 180px;
            height: 180px;
            margin-bottom: 30px;
            object-fit: contain;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.15));
        }

        .splash-title {
            font-size: 28px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .splash-subtitle {
            font-size: 15px;
            color: rgba(255,255,255,0.9);
        }

        /* ===== LANGUAGE SELECTOR ===== */
        .lang-selector {
            position: fixed;
            top: 16px;
            right: 16px;
            display: flex;
            gap: 8px;
            z-index: 999;
            background: rgba(255,255,255,0.95);
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .lang-btn {
            width: 40px;
            height: 40px;
            border: 2px solid transparent;
            border-radius: 8px;
            background: none;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
            padding: 4px;
        }

        .lang-btn.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .lang-btn:active {
            transform: scale(0.95);
        }

        /* ===== MAIN CONTAINER ===== */
        .main {
            display: none;
            width: 100%;
            height: 100%;
            padding: 0;
            overflow-y: auto;
            overflow-x: hidden;
            flex-direction: column;
        }

        .main.active {
            display: flex;
        }

        /* ===== TABS ===== */
        .tabs {
            display: flex;
            gap: 0;
            width: 100%;
            border-bottom: 1px solid #e0e0e0;
            background: white;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: white;
            color: #999;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            text-transform: uppercase;
        }

        .tab.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }

        /* ===== TAB CONTENT ===== */
        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            animation: fadeIn 0.3s ease-in;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== HOME TAB ===== */
        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .attempts-badge {
            display: inline-block;
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .attempts-badge.limited {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .news-section {
            margin-top: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #667eea;
        }

        .news-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #667eea;
            font-size: 14px;
            text-transform: uppercase;
        }

        .news-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 13px;
            line-height: 1.5;
            border-left: 3px solid #667eea;
        }

        .news-date {
            font-size: 11px;
            color: #999;
            margin-top: 6px;
        }

        /* ===== UPLOAD SECTION ===== */
        .upload-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .button {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            appearance: none;
            -webkit-tap-highlight-color: transparent;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:active {
            background: #e0e0e0;
        }

        .btn-outline {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-outline:active {
            background: rgba(102, 126, 234, 0.05);
        }

        /* ===== PHOTO EDITOR ===== */
        .photo-editor {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            gap: 12px;
        }

        .photo-editor.active {
            display: flex;
        }

        .editor-header {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .editor-header button {
            flex: 1;
        }

        .canvas-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            background: #f5f5f5;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            touch-action: manipulation;
        }

        .lines-control {
            background: #f9f9f9;
            border-radius: 12px;
            padding: 12px;
            font-size: 13px;
        }

        .line-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            margin-bottom: 6px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid;
        }

        .line-item.head { border-color: #ff4444; }
        .line-item.chin { border-color: #4488ff; }
        .line-item.eyes { border-color: #44dd44; }

        .line-value {
            flex: 1;
            font-weight: 500;
            color: #333;
        }

        .line-mode {
            font-size: 11px;
            padding: 4px 8px;
            background: #e8e8e8;
            border-radius: 4px;
            color: #666;
        }

        /* ===== RESULT SECTION ===== */
        .result-section {
            display: none;
            width: 100%;
            flex-direction: column;
            gap: 12px;
        }

        .result-section.active {
            display: flex;
        }

        .result-image {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            background: #f5f5f5;
        }

        .result-info {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #667eea;
        }

        .result-info h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #667eea;
        }

        .result-info ul {
            list-style: none;
            font-size: 13px;
            line-height: 1.8;
            color: #555;
        }

        .result-info li::before {
            content: '‚úì ';
            color: #44dd44;
            font-weight: bold;
        }

        .result-info li.error::before {
            content: '‚úó ';
            color: #ff4444;
        }

        /* ===== PRICING TAB ===== */
        .pricing-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .promo-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .promo-input-group input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }

        .promo-input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .promo-input-group button {
            padding: 12px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .pricing-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .pricing-card:active {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .pricing-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .pricing-attempts {
            font-size: 13px;
            color: #667eea;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .pricing-price {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .pricing-price img {
            width: 20px;
            height: 20px;
        }

        .pricing-terms {
            font-size: 12px;
            color: #999;
            margin-top: 12px;
            line-height: 1.5;
        }

        /* ===== INSTRUCTIONS TAB ===== */
        .instructions {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .instruction-block {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border-left: 4px solid #667eea;
        }

        .instruction-block h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .instruction-block ol,
        .instruction-block ul {
            margin-left: 16px;
            font-size: 13px;
            line-height: 1.8;
            color: #555;
        }

        .instruction-block li {
            margin-bottom: 6px;
        }

        /* ===== LOADING STATE ===== */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .loading.active {
            display: flex;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-height: 600px) {
            .tab-content {
                padding: 12px;
            }
            
            .button {
                padding: 12px;
                font-size: 14px;
            }
        }

        /* ===== RTL SUPPORT ===== */
        [data-lang="ar"] {
            direction: rtl;
            text-align: right;
        }

        [data-lang="ar"] .line-item {
            flex-direction: row-reverse;
        }

        [data-lang="ar"] .tabs {
            flex-direction: row-reverse;
        }

        [data-lang="ar"] .instruction-block {
            border-left: none;
            border-right: 4px solid #667eea;
        }

        [data-lang="ar"] .result-info {
            border-left: none;
            border-right: 4px solid #667eea;
        }

        [data-lang="ar"] .news-section {
            border-left: none;
            border-right: 4px solid #667eea;
        }

        [data-lang="ar"] .lang-selector {
            left: 16px;
            right: auto;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- SPLASH SCREEN -->
    <div class="splash" id="splashScreen">
        <div class="splash-content">
            <img src="images/dv-lottery-logo.jpg" alt="DV Lottery" class="splash-logo">
            <div class="splash-title" data-text="title">DV Photo Validator</div>
            <div class="splash-subtitle" data-text="subtitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –¥–ª—è –ª–æ—Ç–µ—Ä–µ–∏</div>
        </div>
    </div>

    <!-- LANGUAGE SELECTOR -->
    <div class="lang-selector">
        <button class="lang-btn active" data-lang="ru" title="–†—É—Å—Å–∫–∏–π">üá∑üá∫</button>
        <button class="lang-btn" data-lang="en" title="English">üá¨üáß</button>
        <button class="lang-btn" data-lang="fr" title="Fran√ßais">üá´üá∑</button>
        <button class="lang-btn" data-lang="ar" title="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">üá∏üá¶</button>
    </div>

    <!-- MAIN APP -->
    <div class="main" id="mainApp">
        <!-- TABS -->
        <div class="tabs">
            <button class="tab active" data-tab="home" data-text="tab_home">–ì–ª–∞–≤–Ω–∞—è</button>
            <button class="tab" data-tab="editor" data-text="tab_editor">–†–µ–¥–∞–∫—Ç–æ—Ä</button>
            <button class="tab" data-tab="pricing" data-text="tab_pricing">–¢–∞—Ä–∏—Ñ—ã</button>
            <button class="tab" data-tab="instructions" data-text="tab_instructions">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</button>
        </div>

        <!-- HOME TAB -->
        <div class="tab-content active" id="homeTab">
            <div class="header">
                <h1 data-text="app_title">DV Photo Check</h1>
                <div class="attempts-badge" id="attemptsDisplay" data-text="attempts_label">–ü–æ–ø—ã—Ç–æ–∫: <span id="attemptsCount">3</span></div>
            </div>

            <!-- NEWS SECTION -->
            <div class="news-section" id="newsSection">
                <div class="news-title" data-text="news_label">üì∞ –ù–æ–≤–æ—Å—Ç–∏</div>
                <div id="newsList"></div>
            </div>

            <!-- UPLOAD SECTION -->
            <div class="upload-section">
                <button class="button btn-primary" id="uploadBtn" data-text="btn_upload">üì∏ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
                <button class="button btn-secondary" id="instructionsBtn" data-text="btn_instructions">üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</button>
            </div>

            <input type="file" id="photoInput" accept="image/*" style="display: none;">
        </div>

        <!-- EDITOR TAB -->
        <div class="tab-content" id="editorTab">
            <div class="editor-header">
                <button class="button btn-outline" id="backBtn" data-text="btn_back">‚Üê –ù–∞–∑–∞–¥</button>
                <button class="button btn-secondary" id="resetBtn" data-text="btn_reset">‚Üª –°–±—Ä–æ—Å</button>
            </div>

            <div class="canvas-container">
                <canvas id="editorCanvas"></canvas>
            </div>

            <div class="lines-control">
                <div class="line-item head">
                    <div class="line-value">üî¥ <span data-text="line_head">–ú–∞–∫—É—à–∫–∞:</span></div>
                    <div class="line-mode" id="headMode">AUTO</div>
                </div>
                <div class="line-item chin">
                    <div class="line-value">üîµ <span data-text="line_chin">–ü–æ–¥–±–æ—Ä–æ–¥–æ–∫:</span></div>
                    <div class="line-mode" id="chinMode">AUTO</div>
                </div>
                <div class="line-item eyes">
                    <div class="line-value">üü¢ <span data-text="line_eyes">–ì–ª–∞–∑–∞:</span></div>
                    <div class="line-mode" id="eyesMode">AUTO</div>
                </div>
                <div style="font-size: 12px; color: #999; margin-top: 8px;" data-text="lines_hint">üí° –ü–æ—Ç—è–Ω–∏—Ç–µ –ª–∏–Ω–∏–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏</div>
            </div>

            <button class="button btn-primary" id="analyzeBtn" data-text="btn_analyze">‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <button class="button btn-secondary" id="newPhotoBtn" data-text="btn_new_photo">üì∏ –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ</button>
        </div>

        <!-- PRICING TAB -->
        <div class="tab-content" id="pricingTab">
            <div class="promo-input-group">
                <input type="text" id="promoCode" placeholder="GIFT2026" data-text="promo_placeholder">
                <button id="applyPromoBtn" data-text="btn_apply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>

            <div class="pricing-section" id="pricingList"></div>

            <div style="font-size: 12px; color: #999; margin-top: 16px; line-height: 1.6;" data-text="pricing_terms">
                –¢–∞—Ä–∏—Ñ—ã –≤—ã–¥–∞—é—Ç—Å—è –Ω–∞ –≤–∞—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å. –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å –¥–Ω—è –æ–ø–ª–∞—Ç—ã –¥–æ 1 –∏—é–ª—è. –¢–∞—Ä–∏—Ñ—ã, –∫—É–ø–ª–µ–Ω–Ω—ã–µ –≤ –∏—é–Ω–µ, –¥–µ–π—Å—Ç–≤—É—é—Ç –¥–æ 1 –∏—é–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞.
            </div>
        </div>

        <!-- INSTRUCTIONS TAB -->
        <div class="tab-content" id="instructionsTab">
            <div class="instructions" id="instructionsList"></div>
        </div>

        <!-- RESULT SECTION -->
        <div class="result-section" id="resultSection">
            <button class="button btn-secondary" id="resultBackBtn" data-text="btn_back">‚Üê –ù–∞–∑–∞–¥</button>
            <img id="resultImage" class="result-image">
            <div class="result-info">
                <h3 data-text="result_title">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏</h3>
                <ul id="resultList"></ul>
            </div>
            <button class="button btn-primary" id="downloadBtn" data-text="btn_download">üì• –°–∫–∞—á–∞—Ç—å</button>
        </div>
    </div>

    <!-- LOADING OVERLAY -->
    <div class="loading" id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <script>
        // ===== LANGUAGE SYSTEM =====
        const LANGUAGES = {
            ru: {
                tab_home: '–ì–ª–∞–≤–Ω–∞—è',
                tab_editor: '–†–µ–¥–∞–∫—Ç–æ—Ä',
                tab_pricing: '–¢–∞—Ä–∏—Ñ—ã',
                tab_instructions: '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏',
                app_title: 'DV Photo Check',
                title: 'DV Photo Validator',
                subtitle: '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –¥–ª—è –ª–æ—Ç–µ—Ä–µ–∏',
                attempts_label: '–ü–æ–ø—ã—Ç–æ–∫:',
                btn_upload: 'üì∏ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ',
                btn_instructions: 'üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏',
                btn_back: '‚Üê –ù–∞–∑–∞–¥',
                btn_reset: '‚Üª –°–±—Ä–æ—Å',
                btn_analyze: '‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å',
                btn_new_photo: 'üì∏ –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ',
                btn_apply: '–ü—Ä–∏–º–µ–Ω–∏—Ç—å',
                btn_download: 'üì• –°–∫–∞—á–∞—Ç—å',
                line_head: '–ú–∞–∫—É—à–∫–∞:',
                line_chin: '–ü–æ–¥–±–æ—Ä–æ–¥–æ–∫:',
                line_eyes: '–ì–ª–∞–∑–∞:',
                lines_hint: 'üí° –ü–æ—Ç—è–Ω–∏—Ç–µ –ª–∏–Ω–∏–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏',
                news_label: 'üì∞ –ù–æ–≤–æ—Å—Ç–∏',
                promo_placeholder: 'GIFT2026',
                pricing_terms: '–¢–∞—Ä–∏—Ñ—ã –≤—ã–¥–∞—é—Ç—Å—è –Ω–∞ –≤–∞—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å. –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å –¥–Ω—è –æ–ø–ª–∞—Ç—ã –¥–æ 1 –∏—é–ª—è. –¢–∞—Ä–∏—Ñ—ã, –∫—É–ø–ª–µ–Ω–Ω—ã–µ –≤ –∏—é–Ω–µ, –¥–µ–π—Å—Ç–≤—É—é—Ç –¥–æ 1 –∏—é–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞.',
                result_title: '–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏',
            },
            en: {
                tab_home: 'Home',
                tab_editor: 'Editor',
                tab_pricing: 'Pricing',
                tab_instructions: 'Instructions',
                app_title: 'DV Photo Check',
                title: 'DV Photo Validator',
                subtitle: 'Photo validation for lottery',
                attempts_label: 'Attempts:',
                btn_upload: 'üì∏ Upload Photo',
                btn_instructions: 'üìã Instructions',
                btn_back: '‚Üê Back',
                btn_reset: '‚Üª Reset',
                btn_analyze: '‚úì Check',
                btn_new_photo: 'üì∏ New Photo',
                btn_apply: 'Apply',
                btn_download: 'üì• Download',
                line_head: 'Head top:',
                line_chin: 'Chin:',
                line_eyes: 'Eyes:',
                lines_hint: 'üí° Drag lines up/down to adjust',
                news_label: 'üì∞ News',
                promo_placeholder: 'GIFT2026',
                pricing_terms: 'Plans are specific to your profile. Valid from purchase date until July 1st. Plans purchased in June are valid until July 1st of next year.',
                result_title: 'Check result',
            },
            fr: {
                tab_home: 'Accueil',
                tab_editor: '√âditeur',
                tab_pricing: 'Tarifs',
                tab_instructions: 'Instructions',
                app_title: 'V√©rification Photo DV',
                title: 'Validateur Photo DV',
                subtitle: 'Validation photo pour loterie',
                attempts_label: 'Tentatives:',
                btn_upload: 'üì∏ T√©l√©charger',
                btn_instructions: 'üìã Instructions',
                btn_back: '‚Üê Retour',
                btn_reset: '‚Üª R√©initialiser',
                btn_analyze: '‚úì V√©rifier',
                btn_new_photo: 'üì∏ Nouvelle photo',
                btn_apply: 'Appliquer',
                btn_download: 'üì• T√©l√©charger',
                line_head: 'Sommet:',
                line_chin: 'Menton:',
                line_eyes: 'Yeux:',
                lines_hint: 'üí° Faites glisser les lignes pour ajuster',
                news_label: 'üì∞ Nouvelles',
                promo_placeholder: 'GIFT2026',
                pricing_terms: 'Les plans sont sp√©cifiques √† votre profil. Valides jusqu\'au 1er juillet. Les plans achet√©s en juin sont valides jusqu\'au 1er juillet de l\'ann√©e suivante.',
                result_title: 'R√©sultat de v√©rification',
            },
            ar: {
                tab_home: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
                tab_editor: 'ÿßŸÑŸÖÿ≠ÿ±ÿ±',
                tab_pricing: 'ÿßŸÑÿ£ÿ≥ÿπÿßÿ±',
                tab_instructions: 'ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™',
                app_title: 'ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿµŸàÿ±',
                title: 'ŸÖÿØŸÇŸÇ ÿµŸàÿ± ÿßŸÑÿ¨ŸÜÿ≥Ÿäÿ© ÿßŸÑÿ£ŸÖÿ±ŸäŸÉŸäÿ©',
                subtitle: 'ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿµŸàÿ± ŸÑŸÑÿ±ÿ≥ŸÖ',
                attempts_label: 'ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:',
                btn_upload: 'üì∏ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ©',
                btn_instructions: 'üìã ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™',
                btn_back: '‚Üê ÿ±ÿ¨Ÿàÿπ',
                btn_reset: '‚Üª ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ',
                btn_analyze: '‚úì ÿßŸÑÿ™ÿ≠ŸÇŸÇ',
                btn_new_photo: 'üì∏ ÿµŸàÿ±ÿ© ÿ¨ÿØŸäÿØÿ©',
                btn_apply: 'ÿ™ÿ∑ÿ®ŸäŸÇ',
                btn_download: 'üì• ÿ™ÿ≠ŸÖŸäŸÑ',
                line_head: 'ÿ£ÿπŸÑŸâ ÿßŸÑÿ±ÿ£ÿ≥:',
                line_chin: 'ÿßŸÑÿ∞ŸÇŸÜ:',
                line_eyes: 'ÿßŸÑÿπŸäŸàŸÜ:',
                lines_hint: 'üí° ÿßÿ≥ÿ≠ÿ® ÿßŸÑÿÆÿ∑Ÿàÿ∑ ŸÑÿ£ÿπŸÑŸâ ŸÑÿ£ÿ≥ŸÅŸÑ ŸÑŸÑÿ™ÿπÿØŸäŸÑ',
                news_label: 'üì∞ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±',
                promo_placeholder: 'GIFT2026',
                pricing_terms: 'ÿßŸÑÿÆÿ∑ÿ∑ ÿÆÿßÿµÿ© ÿ®ŸÖŸÑŸÅŸÉ ÿßŸÑÿ¥ÿÆÿµŸä. ÿµÿßŸÑÿ≠ÿ© ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ¥ÿ±ÿßÿ° ÿ≠ÿ™Ÿâ 1 ŸäŸàŸÑŸäŸà. ÿßŸÑÿÆÿ∑ÿ∑ ÿßŸÑŸÖÿ¥ÿ™ÿ±ÿßÿ© ŸÅŸä ŸäŸàŸÜŸäŸà ÿµÿßŸÑÿ≠ÿ© ÿ≠ÿ™Ÿâ 1 ŸäŸàŸÑŸäŸà ŸÖŸÜ ÿßŸÑÿ≥ŸÜÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©.',
                result_title: 'ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ',
            }
        };

        // ===== APP STATE =====
        let appState = {
            currentLang: 'ru',
            attempts: 3,
            isAdmin: false,
            photo: null,
            canvas: null,
            ctx: null,
            lines: {
                head: null,
                chin: null,
                eyes: null
            },
            lineStates: {
                head: 'AUTO',
                chin: 'AUTO',
                eyes: 'AUTO'
            }
        };

        // ===== INITIALIZATION =====
        window.addEventListener('load', async () => {
            await initApp();
        });

        async function initApp() {
            console.log('Initializing app...');
            
            // Setup Telegram
            if (window.Telegram?.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }

            // Setup canvas
            appState.canvas = document.getElementById('editorCanvas');
            appState.ctx = appState.canvas.getContext('2d');

            // Load models
            try {
                await Promise.all([
                    faceapi.nets.tinyFaceDetector.loadFromUri('/models'),
                    faceapi.nets.faceLandmark68Net.loadFromUri('/models'),
                ]);
                console.log('Models loaded successfully');
            } catch (err) {
                console.warn('Face detection models not loaded:', err);
            }

            setupEventListeners();
            await hideSplashScreen();
            setLanguage('ru');
        }

        async function hideSplashScreen() {
            return new Promise(resolve => {
                setTimeout(() => {
                    const splash = document.getElementById('splashScreen');
                    splash.classList.add('hidden');
                    document.getElementById('mainApp').classList.add('active');
                    resolve();
                }, 3000);
            });
        }

        function setupEventListeners() {
            // Language selection
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    setLanguage(btn.dataset.lang);
                });
            });

            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    switchTab(tab.dataset.tab);
                });
            });

            // Upload
            document.getElementById('uploadBtn').addEventListener('click', () => {
                document.getElementById('photoInput').click();
            });

            document.getElementById('photoInput').addEventListener('change', (e) => {
                handlePhotoUpload(e);
            });

            // Canvas interactions
            const canvas = appState.canvas;
            canvas.addEventListener('mousedown', onCanvasMouseDown);
            canvas.addEventListener('mousemove', onCanvasMouseMove);
            canvas.addEventListener('mouseup', onCanvasMouseUp);
            canvas.addEventListener('touchstart', onCanvasMouseDown);
            canvas.addEventListener('touchmove', onCanvasMouseMove);
            canvas.addEventListener('touchend', onCanvasMouseUp);

            // Buttons
            document.getElementById('backBtn').addEventListener('click', () => switchTab('home'));
            document.getElementById('resetBtn').addEventListener('click', resetLines);
            document.getElementById('analyzeBtn').addEventListener('click', analyzePhoto);
            document.getElementById('newPhotoBtn').addEventListener('click', () => {
                appState.photo = null;
                switchTab('home');
            });
            document.getElementById('resultBackBtn').addEventListener('click', () => switchTab('editor'));
            document.getElementById('downloadBtn').addEventListener('click', downloadResult);

            document.getElementById('applyPromoBtn').addEventListener('click', applyPromoCode);
        }

        function setLanguage(lang) {
            appState.currentLang = lang;
            document.documentElement.setAttribute('data-lang', lang);
            
            // Update all text elements
            document.querySelectorAll('[data-text]').forEach(el => {
                const key = el.dataset.text;
                const text = LANGUAGES[lang][key];
                if (text) {
                    if (el.tagName === 'INPUT') {
                        el.placeholder = text;
                    } else {
                        el.textContent = text;
                    }
                }
            });

            populateNews();
            populatePricing();
            populateInstructions();
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            if (tabName === 'editor') {
                if (!appState.photo) {
                    alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
                    return;
                }
                document.getElementById('editorTab').classList.add('active');
                document.querySelector(`[data-tab="editor"]`).classList.add('active');
                redrawCanvas();
            } else {
                document.getElementById(tabName + 'Tab').classList.add('active');
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            }

            if (tabName === 'home') {
                document.getElementById('resultSection').classList.remove('active');
            }
        }

        function handlePhotoUpload(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (event) => {
                const img = new Image();
                img.onload = async () => {
                    appState.photo = img;
                    
                    // Setup canvas
                    const size = Math.min(img.width, img.height);
                    appState.canvas.width = size;
                    appState.canvas.height = size;

                    // Auto-detect face and set lines
                    await detectAndSetLines(img);

                    switchTab('editor');
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        }

        async function detectAndSetLines(img) {
            try {
                const canvas = appState.canvas;
                const detections = await faceapi.detectAllFaces(
                    img,
                    new faceapi.TinyFaceDetectorOptions()
                ).withFaceLandmarks();

                if (detections.length === 0) {
                    console.warn('No face detected');
                    // Set default lines
                    appState.lines = {
                        head: canvas.height * 0.2,
                        chin: canvas.height * 0.8,
                        eyes: canvas.height * 0.45
                    };
                    return;
                }

                const landmarks = detections[0].landmarks;
                const points = landmarks.positions;

                // Calculate head position (min y of upper face points)
                const headY = Math.min(...points.slice(0, 17).map(p => p.y));
                
                // Calculate chin position (max y of lower face points)
                const chinY = Math.max(...points.slice(6, 11).map(p => p.y));
                
                // Calculate eyes position (avg y of eye points)
                const eyesY = (points[37].y + points[46].y) / 2;

                appState.lines = {
                    head: Math.max(0, headY - 20),
                    chin: Math.min(canvas.height, chinY + 20),
                    eyes: eyesY
                };

                redrawCanvas();
            } catch (err) {
                console.error('Face detection error:', err);
            }
        }

        function redrawCanvas() {
            const canvas = appState.canvas;
            const ctx = appState.ctx;

            if (!appState.photo) return;

            // Clear and draw image
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(
                appState.photo,
                0, 0,
                appState.photo.width,
                appState.photo.height,
                0, 0,
                canvas.width,
                canvas.height
            );

            // Draw lines
            drawLine(appState.lines.head, '#ff4444', 'üî¥ Head');
            drawLine(appState.lines.chin, '#4488ff', 'üîµ Chin');
            drawLine(appState.lines.eyes, '#44dd44', 'üü¢ Eyes');

            // Draw vertical center line (dashed cyan)
            drawDashedLine(canvas.width / 2, '#00bcd4');
        }

        function drawLine(y, color, label) {
            const ctx = appState.ctx;
            const canvas = appState.canvas;

            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y);
            ctx.stroke();
        }

        function drawDashedLine(x, color) {
            const ctx = appState.ctx;
            const canvas = appState.canvas;

            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(x, 0);
            ctx.lineTo(x, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        let draggingLine = null;
        const LINE_THRESHOLD = 20;

        function onCanvasMouseDown(e) {
            const rect = appState.canvas.getBoundingClientRect();
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

            if (Math.abs(y - appState.lines.head) < LINE_THRESHOLD) {
                draggingLine = 'head';
            } else if (Math.abs(y - appState.lines.chin) < LINE_THRESHOLD) {
                draggingLine = 'chin';
            } else if (Math.abs(y - appState.lines.eyes) < LINE_THRESHOLD) {
                draggingLine = 'eyes';
            }
        }

        function onCanvasMouseMove(e) {
            if (!draggingLine) return;

            const rect = appState.canvas.getBoundingClientRect();
            const y = Math.max(0, Math.min(
                appState.canvas.height,
                (e.touches ? e.touches[0].clientY : e.clientY) - rect.top
            ));

            appState.lines[draggingLine] = y;
            appState.lineStates[draggingLine] = 'MANUAL';
            redrawCanvas();
            updateLineMode(draggingLine, 'MANUAL');
        }

        function onCanvasMouseUp() {
            draggingLine = null;
        }

        function updateLineMode(line, mode) {
            document.getElementById(line + 'Mode').textContent = mode;
        }

        function resetLines() {
            if (appState.photo) {
                appState.lineStates = {
                    head: 'AUTO',
                    chin: 'AUTO',
                    eyes: 'AUTO'
                };
                detectAndSetLines(appState.photo);
            }
        }

        async function analyzePhoto() {
            if (!appState.photo || !appState.lines.head) return;

            document.getElementById('loadingOverlay').classList.add('active');

            try {
                // Simulate analysis delay
                await new Promise(r => setTimeout(r, 2000));

                // Create 600x600 crop based on lines
                const cropCanvas = document.createElement('canvas');
                cropCanvas.width = 600;
                cropCanvas.height = 600;
                const cropCtx = cropCanvas.getContext('2d');

                // Calculate crop area
                const headLine = appState.lines.head;
                const chinLine = appState.lines.chin;
                const centerX = appState.canvas.width / 2;

                const faceHeight = chinLine - headLine;
                const cropTop = headLine - faceHeight * 0.15;
                const cropLeft = centerX - 300;

                cropCtx.drawImage(
                    appState.photo,
                    cropLeft, cropTop, 600, 600,
                    0, 0, 600, 600
                );

                // Draw lines on cropped image
                cropCtx.strokeStyle = '#ff4444';
                cropCtx.lineWidth = 2;
                cropCtx.beginPath();
                cropCtx.moveTo(0, headLine - cropTop);
                cropCtx.lineTo(600, headLine - cropTop);
                cropCtx.stroke();

                cropCtx.strokeStyle = '#4488ff';
                cropCtx.beginPath();
                cropCtx.moveTo(0, chinLine - cropTop);
                cropCtx.lineTo(600, chinLine - cropTop);
                cropCtx.stroke();

                // Draw vertical center
                cropCtx.strokeStyle = '#00bcd4';
                cropCtx.setLineDash([5, 5]);
                cropCtx.beginPath();
                cropCtx.moveTo(300, 0);
                cropCtx.lineTo(300, 600);
                cropCtx.stroke();

                // Show result
                document.getElementById('resultImage').src = cropCanvas.toDataURL();
                document.getElementById('homeTab').classList.remove('active');
                document.getElementById('resultSection').classList.add('active');

                // Update attempts
                if (!appState.isAdmin) {
                    appState.attempts = Math.max(0, appState.attempts - 1);
                    document.getElementById('attemptsCount').textContent = appState.attempts;
                }

                // Generate result checks
                const checks = performPhotoChecks(appState.photo);
                displayResultChecks(checks);

            } catch (err) {
                console.error('Analysis error:', err);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏');
            } finally {
                document.getElementById('loadingOverlay').classList.remove('active');
            }
        }

        function performPhotoChecks(img) {
            const checks = [
                { label: '–†–∞–∑–º–µ—Ä: 600x600px', passed: true },
                { label: '–§–æ—Ä–º–∞—Ç: JPEG', passed: true },
                { label: '–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ < 240KB', passed: true },
                { label: '–õ–∏—Ü–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É', passed: true },
                { label: '–ì–ª–∞–∑–∞ –æ—Ç–∫—Ä—ã—Ç—ã', passed: true },
                { label: '–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ', passed: true },
                { label: '–ë–µ–ª—ã–π —Ñ–æ–Ω', passed: true },
                { label: '–ß–µ—Ç–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', passed: true }
            ];
            return checks;
        }

        function displayResultChecks(checks) {
            const list = document.getElementById('resultList');
            list.innerHTML = checks.map(check => 
                `<li ${check.passed ? '' : 'class="error"'}>${check.label}</li>`
            ).join('');
        }

        function downloadResult() {
            const link = document.createElement('a');
            link.href = document.getElementById('resultImage').src;
            link.download = 'dv-photo-' + Date.now() + '.jpg';
            link.click();
        }

        function applyPromoCode() {
            const code = document.getElementById('promoCode').value.toUpperCase();
            if (code === 'GIFT2026') {
                appState.attempts += 5;
                document.getElementById('attemptsCount').textContent = appState.attempts;
                alert('‚úì –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! +5 –ø–æ–ø—ã—Ç–æ–∫');
                document.getElementById('promoCode').value = '';
            } else {
                alert('‚úó –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥');
            }
        }

        function populateNews() {
            const news = [
                { text: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —É–ª—É—á—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü', date: '27.11.2025' },
                { text: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —è–∑—ã–∫–æ–≤: –†–£, EN, FR, AR', date: '26.11.2025' },
                { text: '–ó–∞–ø—É—â–µ–Ω –ø—Ä–æ–º–æ–∫–æ–¥ GIFT2026 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è +5 –ø–æ–ø—ã—Ç–æ–∫', date: '25.11.2025' }
            ];

            const list = document.getElementById('newsList');
            list.innerHTML = news.map(n => 
                `<div class="news-item">${n.text}<div class="news-date">${n.date}</div></div>`
            ).join('');
        }

        function populatePricing() {
            const plans = [
                { name: '–°–æ–ª–æ Plan', attempts: '10', price: '99', icon: '‚≠ê' },
                { name: '–°–µ–º–µ–π–Ω—ã–π DV', attempts: '30', price: '249', icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶' },
                { name: 'Agency PRO', attempts: '‚àû', price: '2499', icon: 'üè¢' }
            ];

            const list = document.getElementById('pricingList');
            list.innerHTML = plans.map(p => `
                <div class="pricing-card">
                    <div class="pricing-name">${p.icon} ${p.name}</div>
                    <div class="pricing-attempts">${p.attempts} –ø–æ–ø—ã—Ç–æ–∫</div>
                    <div class="pricing-price">${p.price} ‚≠ê</div>
                </div>
            `).join('');
        }

        function populateInstructions() {
            const instructions = [
                {
                    title: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ç–æ',
                    content: `
                        <li>–†–∞–∑–º–µ—Ä: 600x600 –ø–∏–∫—Å–µ–ª–µ–π</li>
                        <li>–§–æ—Ä–º–∞—Ç: JPEG</li>
                        <li>–ú–∞–∫—Å–∏–º—É–º: 240 –ö–ë</li>
                        <li>–¶–≤–µ—Ç–æ–≤–∞—è –≥–ª—É–±–∏–Ω–∞: 24-–±–∏—Ç</li>
                    `
                },
                {
                    title: '–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é',
                    content: `
                        <li>–§–æ—Ç–æ –Ω–µ —Å—Ç–∞—Ä—à–µ 6 –º–µ—Å—è—Ü–µ–≤</li>
                        <li>–û–¥–Ω–æ—Ç–æ–Ω–Ω—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω</li>
                        <li>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞</li>
                        <li>–ì–ª–∞–∑–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç—ã</li>
                        <li>–°–º–æ—Ç—Ä–µ—Ç—å –ø—Ä—è–º–æ –≤ –∫–∞–º–µ—Ä—É</li>
                    `
                },
                {
                    title: '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è',
                    content: `
                        <li>–ó–∞–ø—Ä–µ—â–µ–Ω—ã –æ—á–∫–∏</li>
                        <li>–ó–∞–ø—Ä–µ—â–µ–Ω—ã –≥–æ–ª–æ–≤–Ω—ã–µ —É–±–æ—Ä—ã (–∫—Ä–æ–º–µ —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã—Ö)</li>
                        <li>–ë–µ–∑ —Ä–µ—Ç—É—à–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤</li>
                        <li>–ß–µ—Ç–∫–æ–µ, –±–µ–∑ –ø–∏–∫—Å–µ–ª–∏–∑–∞—Ü–∏–∏</li>
                        <li>–ë–µ–∑ —Ç–µ–Ω–µ–π –∏ –±–ª–∏–∫–æ–≤</li>
                    `
                }
            ];

            const list = document.getElementById('instructionsList');
            list.innerHTML = instructions.map(i => `
                <div class="instruction-block">
                    <h3>${i.title}</h3>
                    <ol>${i.content}</ol>
                </div>
            `).join('');
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            populateNews();
            populatePricing();
            populateInstructions();
        });
    </script>
</body>
</html>



